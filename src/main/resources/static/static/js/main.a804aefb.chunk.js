(this["webpackJsonpmedical-center-frontend"]=this["webpackJsonpmedical-center-frontend"]||[]).push([[0],{377:function(e,t,n){},380:function(e,t,n){"use strict";n.r(t);var a=n(1),c=n.n(a),r=n(28),s=n.n(r),i=n(8),o=n.p+"static/media/logo.cdf2223c.png",l=n(436),u=n(429),d=n(438),j=n(435),b=n(76),p=n(143),h=n(20),O=n(2),m=function(e){var t=e.changeLanguage,n=e.t,a=e.setLogged,c=Object(h.k)(),r=Object(O.jsx)(p.a,{size:46}),s=Object(h.l)().pathname;return Object(O.jsx)(l.a,{bg:"light",variant:"light",expand:"lg",collapseOnSelect:"true",sticky:"top",className:"navContainer",children:Object(O.jsxs)(u.a,{fluid:!0,children:[Object(O.jsx)(l.a.Brand,{className:"navbar-brand",children:Object(O.jsx)("img",{alt:"Portal pacjenta",src:o})}),Object(O.jsx)(l.a.Toggle,{"aria-controls":"basic-navbar-nav"}),Object(O.jsxs)(l.a.Collapse,{id:"navbarToggleExternalContent",className:"navCollapse",children:[Object(O.jsxs)(d.a,{className:"navNav",children:[Object(O.jsx)(b.LinkContainer,{to:"/appointments",activeHref:"active",children:Object(O.jsx)(d.a.Link,{exact:!0,className:"navItemLink",children:n("appointments")})}),Object(O.jsx)(b.LinkContainer,{to:"/referrals",activeHref:"active",children:Object(O.jsx)(d.a.Link,{exact:!0,className:"navItemLink",children:n("referrals")})}),Object(O.jsx)(b.LinkContainer,{to:"/schedule",activeHref:"active",children:Object(O.jsx)(d.a.Link,{exact:!0,className:"navItemLink",children:n("schedules")})}),Object(O.jsx)(b.LinkContainer,{to:"/check-ups",activeHref:"active",children:Object(O.jsx)(d.a.Link,{exact:!0,className:"navItemLink",children:n("checkups")})}),Object(O.jsx)(b.LinkContainer,{to:"/prescriptions",activeHref:"active",children:Object(O.jsx)(d.a.Link,{exact:!0,className:"navItemLink",children:n("prescriptions")})})]},s),Object(O.jsxs)(j.a,{className:"navItemLanguages",title:r,id:"basic-nav-dropdown",children:[Object(O.jsx)(b.LinkContainer,{to:"/my-account",activeHref:"active",children:Object(O.jsx)(d.a.Link,{exact:!0,className:"navItemLink2 nav-link",children:n("myAccount")})}),Object(O.jsx)(b.LinkContainer,{to:"/my-files",activeHref:"active",children:Object(O.jsx)(d.a.Link,{exact:!0,className:"navItemLink2",children:n("myFiles")})}),Object(O.jsxs)(j.a,{title:n("language"),id:"basic-nav-dropdown",children:[Object(O.jsx)(j.a.Item,{onClick:function(){t("en")},children:"English"}),Object(O.jsx)(j.a.Item,{onClick:function(){t("pl")},children:"Polski"})]}),Object(O.jsx)(j.a.Divider,{}),Object(O.jsx)(j.a.Item,{onClick:function(){sessionStorage.clear(),sessionStorage.setItem("logged","false"),a(!1),c.push("/login")},children:n("logout")})]})]})]})})},f=function(e){var t=e.t;return Object(O.jsx)("footer",{children:t("footer")})},x=n(15),v=n.n(x),g=n(22),S=n(430),y=n(233),k=n(12),w=n(47),C=n(113),N=n(33),D="https://medical-center.herokuapp.com",I=new Date,A=function(e){var t=e.t,n=e.logout,c=e.setLogged,r=Object(h.k)(),s=Object(a.useState)(!1),o=Object(i.a)(s,2),l=o[0],u=o[1],d=Object(a.useState)((function(){return JSON.parse(sessionStorage.getItem("id"))||void 0})),j=Object(i.a)(d,2),b=j[0],p=(j[1],Object(a.useState)((function(){return JSON.parse(sessionStorage.getItem("token"))||void 0}))),m=Object(i.a)(p,2),f=m[0],x=(m[1],N.b().shape({firstName:N.d().min(2,t("firstNameMinCharacter")).max(50,t("firstNameMaxCharacter")).required(t("required")),lastName:N.d().min(2,t("lastNameMinCharacter")).max(50,t("lastNameMaxCharacter")).required(t("required")),pesel:N.d().min(11,t("peselCharacterError")).max(11,t("peselCharacterError")).test("test-name",t("invalidPeselError"),(function(e){if(!1===/^[0-9]{11}$/.test(e))return!1;var t=(""+e).split("");if(parseInt(e.substring(4,6))>31||parseInt(e.substring(2,4))>12)return!1;var n=(1*parseInt(t[0])+3*parseInt(t[1])+7*parseInt(t[2])+9*parseInt(t[3])+1*parseInt(t[4])+3*parseInt(t[5])+7*parseInt(t[6])+9*parseInt(t[7])+1*parseInt(t[8])+3*parseInt(t[9]))%10;return 0===n&&(n=10),n=10-n,parseInt(t[10])===n})).required(t("required")),birthDate:N.a().max(I,t("dateFromFutureError")).required(t("required")),phoneNumber:N.d().min(9,t("phoneNumberError")).required(t("required")),email:N.d().email(t("emailError")).required(t("required")),password:N.d().min(6,t("passwordMinCharactersError")).max(50,t("passwordMaxCharactersError")),confirmPassword:N.d().oneOf([N.c("password"),""],t("passwordMatch")),street:N.d().min(2).required(t("required")),streetNumber:N.d().required(t("required")),city:N.d().required(t("required")),postCode:N.d().required(t("required")).matches(/[0-9]{2}-[0-9]{3}/,t("postCodeError")),country:N.d().required(t("required"))})),A=Object(a.useState)([]),z=Object(i.a)(A,2),L=z[0],E=z[1],T=Object(a.useState)(void 0),B=Object(i.a)(T,2),F=B[0],P=B[1],R=Object(a.useState)(void 0),U=Object(i.a)(R,2),J=U[0],V=U[1],q=Object(a.useState)(void 0),G=Object(i.a)(q,2),H=G[0],M=G[1],W=Object(a.useState)(void 0),Y=Object(i.a)(W,2),_=Y[0],$=Y[1],X=Object(a.useState)(void 0),Z=Object(i.a)(X,2),K=Z[0],Q=Z[1],ee=Object(a.useState)(void 0),te=Object(i.a)(ee,2),ne=te[0],ae=te[1],ce=Object(a.useState)(!1),re=Object(i.a)(ce,2),se=re[0],ie=re[1],oe=Object(a.useState)(void 0),le=Object(i.a)(oe,2),ue=le[0],de=le[1],je=Object(a.useState)(void 0),be=Object(i.a)(je,2),pe=be[0],he=be[1],Oe=Object(a.useState)(void 0),me=Object(i.a)(Oe,2),fe=me[0],xe=me[1],ve=Object(a.useState)(void 0),ge=Object(i.a)(ve,2),Se=ge[0],ye=ge[1],ke=Object(a.useState)(void 0),we=Object(i.a)(ke,2),Ce=we[0],Ne=we[1],De=Object(a.useState)(void 0),Ie=Object(i.a)(De,2),Ae=Ie[0],ze=Ie[1],Le=Object(a.useState)(void 0),Ee=Object(i.a)(Le,2),Te=Ee[0],Be=Ee[1],Fe=Object(a.useState)(void 0),Pe=Object(i.a)(Fe,2),Re=Pe[0],Ue=Pe[1];Object(a.useEffect)((function(){var e=new AbortController;return Object(g.a)(v.a.mark((function t(){var n;return v.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Je();case 3:n=t.sent,E(n),e=null,t.next=12;break;case 8:t.prev=8,t.t0=t.catch(0),console.log(t.t0),u(!0);case 12:case"end":return t.stop()}}),t,null,[[0,8]])})))(),function(){var t;return null===(t=e)||void 0===t?void 0:t.abort()}}),[]),Object(a.useEffect)((function(){void 0!==L&&(P(L.firstName),V(L.lastName),M(L.pesel),$(L.birthDate),Q(L.phoneNumber),ae(L.email),xe(L.patientsFiles),L.address?ye(L.address.street):ye(void 0),L.address?Ne(L.address.streetNumber):Ne(void 0),L.address?ze(L.address.city):ze(void 0),L.address?Be(L.address.postCode):Be(void 0),L.address?Ue(L.address.country):Ue(void 0))}),[L]);var Je=function(){var e=Object(g.a)(v.a.mark((function e(){var t,n;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(D,"/patients/").concat(b),{headers:{Authorization:"Bearer ".concat(f)}});case 2:return 403===(t=e.sent).status&&u(!0),e.next=6,t.json();case 6:return n=e.sent,e.abrupt("return",n);case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return!0===l?(n(r),Object(O.jsx)(O.Fragment,{})):Object(O.jsxs)("div",{className:"itemsList",children:[Object(O.jsx)("div",{className:"listHeader",children:Object(O.jsx)("h2",{children:t("myData")})}),Object(O.jsx)(C.a,{validationSchema:x,enableReinitialize:!0,onSubmit:function(){var e={id:b,address:{street:Se,streetNumber:Ce,postCode:Te,city:Ae,country:Re},phoneNumber:K,firstName:F,lastName:J,birthDate:_,pesel:H,patientsFiles:fe};if(fetch("".concat(D,"/patients"),{method:"PUT",headers:{Authorization:"Bearer ".concat(f),"Access-Control-Allow-Origin":"".concat(D),"Content-Type":"application/json;charset=UTF-8"},body:JSON.stringify(e)}).then((function(e){if(403===e.status)throw window.alert(t("peselIsUsed")),n(r),new Error(t("peselIsUsed"));e.json()})).catch((function(e){return console.log(e)})),!0!==se||void 0!==ue&&""!==ue||window.alert(t("emailAndPasswordRequired")),void 0!==ue&&""!==ue){var a={};a.password=ue,!0===se&&(a.email=ne),fetch("".concat(D,"/users/").concat(b,"/changeCredentials"),{method:"PATCH",headers:{Authorization:"Bearer ".concat(f),"Access-Control-Allow-Origin":"".concat(D),"Content-Type":"application/json;charset=UTF-8"},body:JSON.stringify(a)}).then((function(e){if(403===e.status)throw window.alert(t("emailIsUsed")),n(r),new Error(t("emailIsUsed"))})).then((function(){!0===se&&(window.alert(t("emailChangeLogout")),r.push("/login"),sessionStorage.clear(),sessionStorage.setItem("logged","false"),c(!1))})).catch((function(e){return console.log(e)}))}},initialErrors:{},validateOnChange:!0,validateOnMount:!0,initialValues:{firstName:F,lastName:J,pesel:H,birthDate:_,phoneNumber:K,email:ne,password:ue,confirmPassword:pe,street:Se,streetNumber:Ce,city:Ae,postCode:Te,country:Re},children:function(e){var n=e.handleSubmit,a=e.values,c=e.touched,r=e.errors;return Object(O.jsxs)(k.a,{className:"newAppointmentForm",onSubmit:n,children:[Object(O.jsxs)(S.a,{className:"align-items-center mb-3",children:[Object(O.jsx)(y.a,{children:Object(O.jsxs)(k.a.Group,{children:[Object(O.jsx)(k.a.Label,{children:t("firstName")}),Object(O.jsx)(k.a.Control,{type:"text",name:"firstName",placeholder:t("firstName"),size:"lg",defaultValue:a.firstName,isInvalid:!!r.firstName,isValid:c.firstName&&!r.firstName,onChange:function(e){return P(e.target.value)}}),Object(O.jsx)(k.a.Control.Feedback,{type:"invalid",children:r.firstName})]})}),Object(O.jsx)(y.a,{children:Object(O.jsxs)(k.a.Group,{children:[Object(O.jsx)(k.a.Label,{children:t("lastName")}),Object(O.jsx)(k.a.Control,{type:"text",name:"lastName",placeholder:t("lastName"),size:"lg",defaultValue:a.lastName,isInvalid:!!r.lastName,isValid:c.lastName&&!r.lastName,onChange:function(e){return V(e.target.value)}}),Object(O.jsx)(k.a.Control.Feedback,{type:"invalid",children:r.lastName})]})})]}),Object(O.jsxs)(S.a,{className:"align-items-center mb-3",children:[Object(O.jsx)(y.a,{children:Object(O.jsxs)(k.a.Group,{children:[Object(O.jsx)(k.a.Label,{children:"PESEL:"}),Object(O.jsx)(k.a.Control,{type:"text",name:"pesel",placeholder:"PESEL",size:"lg",defaultValue:a.pesel,isInvalid:!!r.pesel,isValid:c.pesel&&!r.pesel,onChange:function(e){return M(e.target.value)}}),Object(O.jsx)(k.a.Control.Feedback,{type:"invalid",children:r.pesel})]})}),Object(O.jsx)(y.a,{children:Object(O.jsxs)(k.a.Group,{children:[Object(O.jsx)(k.a.Label,{children:t("birthDate")}),Object(O.jsx)(k.a.Control,{type:"date",name:"birthDate",placeholder:t("birthDate"),size:"lg",defaultValue:a.birthDate,isInvalid:!!r.birthDate,isValid:c.birthDate&&!r.birthDate,onChange:function(e){return $(e.target.value)}}),Object(O.jsx)(k.a.Control.Feedback,{type:"invalid",children:r.birthDate})]})})]}),Object(O.jsxs)(S.a,{className:"align-items-center mb-3",children:[Object(O.jsx)(y.a,{children:Object(O.jsxs)(k.a.Group,{children:[Object(O.jsx)(k.a.Label,{children:t("phoneNumber")}),Object(O.jsx)(k.a.Control,{type:"text",name:"phoneNumber",placeholder:t("phoneNumber"),size:"lg",defaultValue:a.phoneNumber,isInvalid:!!r.phoneNumber,isValid:c.phoneNumber&&!r.phoneNumber,onChange:function(e){return Q(e.target.value)}}),Object(O.jsx)(k.a.Control.Feedback,{type:"invalid",children:r.phoneNumber})]})}),Object(O.jsx)(y.a,{children:Object(O.jsxs)(k.a.Group,{children:[Object(O.jsx)(k.a.Label,{children:"Email:"}),Object(O.jsx)(k.a.Control,{type:"email",name:"email",placeholder:"Email",size:"lg",defaultValue:a.email,isInvalid:!!r.email,isValid:c.email&&!r.email,onChange:function(e){ae(e.target.value),ie(!0)}}),Object(O.jsx)(k.a.Control.Feedback,{type:"invalid",children:r.email})]})})]}),Object(O.jsxs)(S.a,{className:"align-items-center mb-3",children:[Object(O.jsx)(y.a,{children:Object(O.jsxs)(k.a.Group,{children:[Object(O.jsxs)(k.a.Label,{children:[t("password"),":"]}),Object(O.jsx)(k.a.Control,{type:"password",name:"password",placeholder:t("password"),size:"lg",defaultValue:a.password,isInvalid:!!r.password,isValid:c.password&&!r.password,onChange:function(e){return de(e.target.value)}}),Object(O.jsx)(k.a.Control.Feedback,{type:"invalid",children:r.password})]})}),Object(O.jsx)(y.a,{children:Object(O.jsxs)(k.a.Group,{children:[Object(O.jsxs)(k.a.Label,{children:[t("confirmPassword"),":"]}),Object(O.jsx)(k.a.Control,{type:"password",name:"confirmPassword",placeholder:t("confirmPassword"),size:"lg",defaultValue:a.confirmPassword,isInvalid:!!r.confirmPassword,isValid:c.confirmPassword&&!r.confirmPassword,onChange:function(e){return he(e.target.value)}}),Object(O.jsx)(k.a.Control.Feedback,{type:"invalid",children:r.confirmPassword})]})})]}),Object(O.jsx)("h6",{style:{color:"#e60000"},children:t("changeEmail")}),Object(O.jsx)("br",{}),Object(O.jsxs)(S.a,{className:"align-items-center mb-3",children:[Object(O.jsx)(y.a,{children:Object(O.jsxs)(k.a.Group,{children:[Object(O.jsx)(k.a.Label,{children:t("street")}),Object(O.jsx)(k.a.Control,{type:"text",name:"street",placeholder:t("street"),size:"lg",defaultValue:a.street,isInvalid:!!r.street,isValid:c.street&&!r.street,onChange:function(e){return ye(e.target.value)}}),Object(O.jsx)(k.a.Control.Feedback,{type:"invalid",children:r.street})]})}),Object(O.jsx)(y.a,{children:Object(O.jsxs)(k.a.Group,{children:[Object(O.jsx)(k.a.Label,{children:t("streetNumber")}),Object(O.jsx)(k.a.Control,{type:"text",name:"streetNumber",placeholder:t("streetNumber"),size:"lg",defaultValue:a.streetNumber,isInvalid:!!r.streetNumber,isValid:c.streetNumber&&!r.streetNumber,onChange:function(e){return Ne(e.target.value)}}),Object(O.jsx)(k.a.Control.Feedback,{type:"invalid",children:r.streetNumber})]})})]}),Object(O.jsxs)(S.a,{className:"align-items-center mb-3",children:[Object(O.jsx)(y.a,{children:Object(O.jsxs)(k.a.Group,{children:[Object(O.jsx)(k.a.Label,{children:t("city")}),Object(O.jsx)(k.a.Control,{type:"text",name:"city",placeholder:t("city"),size:"lg",defaultValue:a.city,isInvalid:!!r.city,isValid:c.city&&!r.city,onChange:function(e){return ze(e.target.value)}}),Object(O.jsx)(k.a.Control.Feedback,{type:"invalid",children:r.city})]})}),Object(O.jsx)(y.a,{children:Object(O.jsxs)(k.a.Group,{children:[Object(O.jsx)(k.a.Label,{children:t("postCode")}),Object(O.jsx)(k.a.Control,{type:"text",name:"postCode",placeholder:t("postCode"),size:"lg",defaultValue:a.postCode,isInvalid:!!r.postCode,isValid:c.postCode&&!r.postCode,onChange:function(e){return Be(e.target.value)}}),Object(O.jsx)(k.a.Control.Feedback,{type:"invalid",children:r.postCode})]})})]}),Object(O.jsxs)(S.a,{className:"align-items-center mb-3",children:[Object(O.jsx)(y.a,{children:Object(O.jsxs)(k.a.Group,{children:[Object(O.jsx)(k.a.Label,{children:t("country")}),Object(O.jsx)(k.a.Control,{type:"text",name:"country",placeholder:t("country"),size:"lg",defaultValue:a.country,isInvalid:!!r.country,isValid:c.country&&!r.country,onChange:function(e){return Ue(e.target.value)}}),Object(O.jsx)(k.a.Control.Feedback,{type:"invalid",children:r.country})]})}),Object(O.jsx)(y.a,{children:Object(O.jsx)(k.a.Group,{})})]}),Object(O.jsx)("div",{style:{display:"flex",justifyContent:"center"},children:Object(O.jsx)(w.a,{variant:"primary",size:"lg",type:"submit",children:t("edit")})})]})}})]})},z=n(23),L=n(9),E=n(155),T=function(e){var t=e.t,n=e.logout,c=Object(h.k)(),r=Object(a.useState)((function(){return JSON.parse(sessionStorage.getItem("id"))||void 0})),s=Object(i.a)(r,2),o=s[0],l=(s[1],Object(a.useState)((function(){return JSON.parse(sessionStorage.getItem("token"))||void 0}))),u=Object(i.a)(l,2),d=u[0],j=(u[1],Object(a.useState)([])),b=Object(i.a)(j,2),p=b[0],m=b[1],f=Object(a.useState)(void 0),x=Object(i.a)(f,2),S=x[0],y=x[1],C=Object(a.useState)(void 0),N=Object(i.a)(C,2),I=N[0],A=N[1],T=Object(a.useState)(void 0),B=Object(i.a)(T,2),F=B[0],P=B[1],R=Object(a.useState)({}),U=Object(i.a)(R,2),J=U[0],V=U[1],q=Object(a.useRef)(),G=Object(a.useState)(!1),H=Object(i.a)(G,2),M=H[0],W=H[1];Object(a.useEffect)((function(){var e=new AbortController;return Object(g.a)(v.a.mark((function t(){var n;return v.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,void 0!==S){t.next=7;break}return t.next=4,Y();case 4:n=t.sent,m(n),e=null;case 7:t.next=13;break;case 9:t.prev=9,t.t0=t.catch(0),console.log(t.t0),W(!0);case 13:case"end":return t.stop()}}),t,null,[[0,9]])})))(),function(){var t;return null===(t=e)||void 0===t?void 0:t.abort()}}),[S]),Object(a.useEffect)((function(){var e=new AbortController;return Object(g.a)(v.a.mark((function t(){var n;return v.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(void 0===I){t.next=14;break}return t.prev=1,t.next=4,Y();case 4:n=t.sent,m(n),A(void 0),e=null,t.next=14;break;case 10:t.prev=10,t.t0=t.catch(1),console.log(t.t0),W(!0);case 14:case"end":return t.stop()}}),t,null,[[1,10]])})))(),function(){var t;return null===(t=e)||void 0===t?void 0:t.abort()}}),[I]);var Y=function(){var e=Object(g.a)(v.a.mark((function e(){var t,n;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(D,"/patients/").concat(o,"/files"),{headers:{Authorization:"Bearer ".concat(d)}});case 2:return 403===(t=e.sent).status&&W(!0),e.next=6,t.json();case 6:return n=e.sent,e.abrupt("return",n);case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),_=function(e){return new Promise((function(t,n){var a=new FileReader;a.readAsDataURL(e),a.onload=function(){t(a.result)},a.onerror=function(e){n(e)}}))},$=function(){var e=Object(g.a)(v.a.mark((function e(t){var n,a,c,r,s,i,o,l,u,d,j;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.target.files[0],e.next=3,_(n);case 3:for(a=e.sent,c=a.split("base64,")[1],r=atob(c),s=new Array(r.length),i=0;i<r.length;i++)s[i]=r.charCodeAt(i);o=new Uint8Array(s),l=Array.from(o),u=new Date,d=u.getFullYear()+"-"+(u.getMonth()+1)+"-"+u.getDate(),j={upload_date:d,file:l,type:t.target.files[0].type,name:t.target.files[0].name},y(j);case 14:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),X=function(e){e.preventDefault();var t=Z();Object.keys(t).length>0?V(t):void 0!==S&&void 0!==F&&(S.description=F,fetch("".concat(D,"/patients/").concat(o,"/files"),{method:"POST",headers:{Authorization:"Bearer ".concat(d),"Content-Type":"application/json","Access-Control-Allow-Origin":"".concat(D)},body:JSON.stringify(S)}).then((function(e){y(void 0),P(""),q.current.value="",403===e.status&&W(!0)})).catch((function(e){return console.log(e)})))},Z=function(){var e={};return void 0===S&&(e.file=t("selectFileError")),void 0!==F&&""!==F||(e.description=t("fileDescriptionError")),void 0===S||["image/png","image/jpeg","application/pdf","application/msword"].includes(S.type)||(e.file=t("uploadFileFormatsError")),e};return!0===M?(n(c),Object(O.jsx)(O.Fragment,{})):Object(O.jsxs)("div",{className:"itemsList",children:[Object(O.jsx)("div",{className:"listHeader",children:Object(O.jsx)("h2",{children:t("addNewFile")})}),Object(O.jsxs)(k.a,{className:"newAppointmentForm",children:[Object(O.jsxs)(k.a.Group,{controlId:"file",className:"mb-2",children:[Object(O.jsx)(k.a.Label,{children:t("file")}),Object(O.jsx)(k.a.Control,{as:"input",ref:q,type:"file",isInvalid:!!J.file,onChange:function(e){$(e),J.file&&V(Object(L.a)(Object(L.a)({},J),{},Object(z.a)({},"file",null)))}}),Object(O.jsx)(k.a.Control.Feedback,{type:"invalid",children:J.file})]}),Object(O.jsxs)(k.a.Group,{controlId:"description",className:"mb-2",children:[Object(O.jsx)(k.a.Label,{children:t("fileDescription")}),Object(O.jsx)(k.a.Control,{as:"textarea",value:F,isInvalid:!!J.description,onChange:function(e){P(e.target.value),J.description&&V(Object(L.a)(Object(L.a)({},J),{},Object(z.a)({},"description",null)))}}),Object(O.jsx)(k.a.Control.Feedback,{type:"invalid",children:J.description})]}),Object(O.jsx)("div",{style:{display:"flex",justifyContent:"center"},children:Object(O.jsx)(w.a,{variant:"primary",onClick:function(e){return X(e)},children:t("addFile")})})]}),p.length>0?Object(O.jsxs)(E.a,{className:"table table-hover table-bordered fileTable",style:{width:"80%"},children:[Object(O.jsx)("thead",{style:{backgroundColor:"#e6eeff"},children:Object(O.jsxs)("tr",{children:[Object(O.jsx)("th",{children:t("fileNameFormat")}),Object(O.jsx)("th",{children:t("fileDescription")}),Object(O.jsx)("th",{children:t("createDate")}),Object(O.jsx)("th",{children:t("action")})]})}),Object(O.jsx)("tbody",{children:p.map((function(e){return Object(O.jsxs)("tr",{children:[Object(O.jsx)("td",{children:e.name}),Object(O.jsx)("td",{children:e.description}),Object(O.jsx)("td",{children:e.uploadDate}),Object(O.jsx)("td",{children:Object(O.jsxs)("ul",{className:"listActions",children:[Object(O.jsx)("li",{children:Object(O.jsx)(w.a,{variant:"primary",href:"".concat(D,"/patients/").concat(o,"/files/").concat(e.id),onClick:function(t){return function(e,t){e.preventDefault(),fetch("".concat(D,"/patients/").concat(o,"/files/").concat(t.id),{headers:{Authorization:"Bearer ".concat(d)}}).then((function(e){return e.json()})).then((function(e){var n=window.document.createElement("a"),a=new Uint8Array(e.file);n.href=window.URL.createObjectURL(new Blob([a],{type:t.type})),n.download=e.name,document.body.appendChild(n),n.click(),document.body.removeChild(n)}))}(t,e)},children:t("download")})}),Object(O.jsx)("li",{children:Object(O.jsx)(w.a,{variant:"danger",href:"".concat(D,"/patients/").concat(o,"/files/").concat(e.id),onClick:function(t){A(e),function(e,t){e.preventDefault(),fetch("".concat(D,"/patients/").concat(o,"/files/").concat(t.id),{headers:{Authorization:"Bearer ".concat(d)},method:"DELETE"}).then((function(e){403===e.status&&W(!0)})).catch((function(e){return console.log(e)}))}(t,e)},children:t("delete")})})]})})]},e.id)}))})]}):t("noFiles")]})},B=n(40),F=n(52),P=n(156),R=function(e){var t=e.appointment,n=e.setCancelledAppointment,c=e.t,r=e.logout,s=Object(h.k)(),o=Object(a.useState)(!1),l=Object(i.a)(o,2),u=l[0],d=l[1],j=Object(a.useState)((function(){return JSON.parse(sessionStorage.getItem("token"))||void 0})),b=Object(i.a)(j,2),p=b[0],m=(b[1],Object(a.useState)(t)),f=Object(i.a)(m,2),x=f[0],v=f[1],g=Object(a.useState)(!1),S=Object(i.a)(g,2),y=S[0],k=S[1],C="RESERVED",N="CONFIRMED",I="DONE",A=6e4*(new Date).getTimezoneOffset();Object(a.useEffect)((function(){void 0!==t&&v(t)}),[t]);var z=function(e){return e.toISOString().slice(0,10)};return!0===u?(r(s),Object(O.jsx)(O.Fragment,{})):Object(O.jsxs)("div",{className:x.date?new Date((new Date).setDate((new Date).getDate()+1))<new Date(x.date.slice(0,10))&&x.state===C?"appointmentAndCheckup incomingApp":new Date((new Date).setDate((new Date).getDate()+1)).getDate()===new Date(x.date.slice(0,10)).getDate()&&x.state===C?"appointmentAndCheckup appToConfirm":z(new Date)===x.date.slice(0,10)||new Date((new Date).setDate((new Date).getDate()+1)).getDate()===new Date(x.date.slice(0,10)).getDate()&&x.state===N?"appointmentAndCheckup todayApp":"appointmentAndCheckup archivalApp":"",onClick:function(e){return function(e){e.preventDefault(),k(!y)}(e)},children:[Object(O.jsxs)("div",{className:"top",children:[Object(O.jsx)("p",{className:"appointmentAndCheckupHeader",children:x.service?c(x.service.name):c(x.serviceName)}),Object(O.jsxs)("div",{className:"data",children:[Object(O.jsx)("p",{children:c("date")}),Object(O.jsx)("p",{children:t.date?new Date(new Date(t.date)-A).toISOString().slice(0,10):""}),Object(O.jsx)("p",{children:t.date?new Date(new Date(t.date)-A).toISOString().slice(11,16):""}),t.state===I&&z(new Date)===x.date.slice(0,10)&&Object(O.jsx)("p",{children:Object(O.jsx)(P.a,{size:42,style:{color:"#18a74b"}})})]})]}),x.date?Object(O.jsxs)("div",{style:{display:"flex",justifyContent:"space-between"},children:[Object(O.jsxs)("div",{children:[Object(O.jsx)(F.d,{size:42}),c("doctorTitle"),"\xa0",x.doctor?x.doctor.firstName+" "+x.doctor.lastName:""]}),Object(O.jsxs)("div",{style:{display:"inline-flex"},children:[Object(O.jsx)("div",{style:{margin:"6px"},children:new Date((new Date).setDate((new Date).getDate()+1)).getDate()===new Date(x.date.slice(0,10)).getDate()&&x.state===C&&Object(O.jsx)(w.a,{variant:"outline-success",size:"lg",onClick:function(e){return function(e){e.preventDefault();var n=x;n.state=N,v(n),fetch("".concat(D,"/appointments/").concat(t.id,"/confirm"),{method:"PATCH",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(p)}}).then((function(e){403===e.status&&d(!0)})).catch((function(e){return console.log(e)}))}(e)},children:c("confirmAppointmentMessage")})}),Object(O.jsx)("div",{style:{margin:"6px"},children:x.state===C&&Object(O.jsx)(w.a,{variant:"outline-primary",size:"lg",onClick:function(e){return function(e){e.preventDefault();var a=x;a.state="AVAILABLE",n(a),fetch("".concat(D,"/appointments/").concat(t.id,"/cancel"),{method:"PATCH",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(p)}}).then((function(e){403===e.status&&d(!0),window.alert(c("canceledAppointmentInfo"))})).catch((function(e){return console.log(e)}))}(e)},children:c("cancelAppointmentMessage")})})]})]}):"",x.state===I?Object(O.jsx)(O.Fragment,{children:y?Object(O.jsxs)("div",{children:[Object(O.jsx)("hr",{}),Object(O.jsxs)("div",{className:"subsections",children:[Object(O.jsx)(F.a,{size:42}),Object(O.jsx)("p",{className:"header",children:c("recommendations")})]}),Object(O.jsx)("ol",{children:Object(O.jsx)("li",{children:x.recommendations?x.recommendations:c("noRecommendations")})}),Object(O.jsx)("hr",{}),Object(O.jsxs)("div",{className:"subsections",children:[Object(O.jsx)(F.b,{size:42}),Object(O.jsx)("p",{className:"header",children:c("madeCheckUps")})]}),Object(O.jsx)("p",{children:x.diagnosticTests.length>0?x.diagnosticTests.map((function(e){return e.diagnosticTestName+", "})):c("noCheckUps")}),Object(O.jsx)("hr",{}),Object(O.jsxs)("div",{className:"subsections",children:[Object(O.jsx)(P.b,{size:42}),Object(O.jsx)("p",{className:"header",children:c("eReceipt")})]}),Object(O.jsx)("p",{children:x.prescriptions.length>0?c("eReceiptIssued"):c("noReceipts")})]}):null}):null]})},U=(n(223),n(437)),J=function(e){var t=e.t,n=e.logout,c=Object(h.k)(),r=Object(a.useState)(!1),s=Object(i.a)(r,2),o=s[0],l=s[1],u="RESERVED",d=Object(a.useState)((function(){return JSON.parse(sessionStorage.getItem("id"))||void 0})),j=Object(i.a)(d,2),b=j[0],p=(j[1],Object(a.useState)((function(){return JSON.parse(sessionStorage.getItem("token"))||void 0}))),m=Object(i.a)(p,2),f=m[0],x=(m[1],Object(a.useState)([])),S=Object(i.a)(x,2),y=S[0],w=S[1],C=Object(a.useState)(void 0),N=Object(i.a)(C,2),I=N[0],A=N[1],z=Object(a.useState)([y]),L=Object(i.a)(z,2),E=L[0],T=L[1],F=Object(a.useState)(void 0),P=Object(i.a)(F,2),J=P[0],V=P[1],q=[3,5,10],G=Object(a.useState)(1),H=Object(i.a)(G,2),M=H[0],W=H[1],Y=Object(a.useState)(0),_=Object(i.a)(Y,2),$=_[0],X=_[1],Z=Object(a.useState)(q[0]),K=Object(i.a)(Z,2),Q=K[0],ee=K[1],te=function(e,t){var n={};return e&&(n.page=e-1),t&&(n.size=t),n};Object(a.useEffect)((function(){var e=new AbortController;return Object(g.a)(v.a.mark((function t(){var n,a,c,r,s;return v.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=[],a=[],c=[],r=[],s=[],t.prev=5,t.next=8,ae().then((function(e){X(e.totalPages),e.appointments.map((function(e){new Date(e.date.slice(0,10))>new Date((new Date).setDate((new Date).getDate()+1))&&e.state===u?c.push(e):new Date((new Date).setDate((new Date).getDate()+1)).getDate()===new Date(e.date.slice(0,10)).getDate()&&e.state===u?a.push(e):"CONFIRMED"===e.state?n.push(e):"DONE"===e.state&&r.push(e)}))})).then((function(){n=n.sort((function(e,t){return new Date(e.date)-new Date(t.date)})),s=[].concat(a,Object(B.a)(n),c,r)}));case 8:w(s),T(s),e=null,t.next=17;break;case 13:t.prev=13,t.t0=t.catch(5),console.log(t.t0),l(!0);case 17:case"end":return t.stop()}}),t,null,[[5,13]])})))(),function(){var t;return null===(t=e)||void 0===t?void 0:t.abort()}}),[J,M,Q]);var ne=function(e){return null!=e.patientId};Object(a.useEffect)((function(){if(void 0!==J){var e=y.filter(ne);w(e)}}),[J]);var ae=function(){var e=Object(g.a)(v.a.mark((function e(){var t,n,a;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null===(t=te(M,Q)).page||null===t.size){e.next=8;break}return e.next=4,fetch("".concat(D,"/patients/").concat(b,"/appointments?page=").concat(t.page,"&size=").concat(t.size),{headers:{Authorization:"Bearer ".concat(f)}});case 4:403===(n=e.sent).status&&l(!0),e.next=26;break;case 8:if(null===t.page||null!==t.size){e.next=15;break}return e.next=11,fetch("".concat(D,"/patients/").concat(b,"/appointments?page=").concat(t.page),{headers:{Authorization:"Bearer ".concat(f)}});case 11:403===(n=e.sent).status&&l(!0),e.next=26;break;case 15:if(null!==t.page||null===t.size){e.next=22;break}return e.next=18,fetch("".concat(D,"/patients/").concat(b,"/appointments?size=").concat(t.size),{headers:{Authorization:"Bearer ".concat(f)}});case 18:403===(n=e.sent).status&&l(!0),e.next=26;break;case 22:return e.next=24,fetch("".concat(D,"/patients/").concat(b,"/appointments"),{headers:{Authorization:"Bearer ".concat(f)}});case 24:403===(n=e.sent).status&&l(!0);case 26:return e.next=28,n.json();case 28:return a=e.sent,e.abrupt("return",a);case 30:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return!0===o?(n(c),Object(O.jsx)(O.Fragment,{})):Object(O.jsxs)("div",{className:"itemsList",children:[Object(O.jsx)("div",{className:"listHeader",children:Object(O.jsx)("h2",{children:t("yourAppointments")})}),Object(O.jsx)("div",{className:"appointmentListHeader",children:Object(O.jsxs)("div",{className:"checkBoxesAndButton",children:[Object(O.jsxs)("div",{className:"checkboxes",children:[Object(O.jsxs)("div",{className:"checkbox",children:[Object(O.jsx)("input",{type:"radio",id:"all",name:"box",value:"all",onChange:function(){T(y)}}),Object(O.jsx)("label",{htmlFor:"all",children:t("all")})]}),Object(O.jsxs)("div",{className:"checkbox",children:[Object(O.jsx)("input",{type:"radio",id:"normal",name:"box",value:"normal",onChange:function(){var e=y.filter((function(e){return"FACILITY"===e.type}));T(e)}}),Object(O.jsx)("label",{htmlFor:"normal",children:t("facilityAppointment")})]}),Object(O.jsxs)("div",{className:"checkbox",children:[Object(O.jsx)("input",{type:"radio",id:"tele",name:"box",value:"tele",onChange:function(){var e=y.filter((function(e){return"TELEPHONE"===e.type}));T(e)}}),Object(O.jsx)("label",{htmlFor:"tele",children:t("teleconsultation")})]})]}),Object(O.jsx)("div",{children:Object(O.jsx)("button",{className:"actionButton",onClick:function(){c.push("/new-appointment")},children:t("makeAppointment")})})]})}),Object(O.jsxs)("div",{className:"test",children:[Object(O.jsx)("div",{className:"appDate",children:Object(O.jsx)(k.a,{children:Object(O.jsxs)(k.a.Group,{children:[Object(O.jsx)(k.a.Label,{children:t("date")}),Object(O.jsx)(k.a.Control,{type:"date",onChange:function(e){A(e.target.value),function(e){if(e.preventDefault(),e.target.value){(new Date).getTimezoneOffset();var t=y.filter((function(t){return t.date.slice(0,10)===e.target.value}));T(t)}else A((new Date).toISOString().slice(0,10))}(e)},value:I})]})})}),E.length>0&&Object(O.jsxs)("div",{className:"itemsNumber",style:{height:"4%"},children:[Object(O.jsxs)("p",{children:[t("elementsNumber"),"\xa0"]}),Object(O.jsx)("select",{onChange:function(e){ee(e.target.value),W(1)},value:Q,children:q.map((function(e){return Object(O.jsx)("option",{value:e,children:e},e)}))})]})]}),E.length>0?Object(O.jsxs)(O.Fragment,{children:[Object(O.jsx)("div",{className:"appointmentList",children:E.map((function(e){return Object(O.jsx)(R,{appointment:e,setCancelledAppointment:V,t:t,logout:n},e.id)}))}),Object(O.jsx)(U.a,{className:"my-3",count:$,page:M,siblingCount:1,boundaryCount:1,shape:"rounded",onChange:function(e,t){W(t)}})]}):t("noAppointmentsToShow")]})},V=Object(h.o)((function(e){var t=e.getAppointments,n=e.t,c=e.logout,r=Object(a.useState)(!1),s=Object(i.a)(r,2),o=s[0],l=s[1],u=Object(a.useState)((function(){return JSON.parse(sessionStorage.getItem("id"))||void 0})),d=Object(i.a)(u,2),j=d[0],b=(d[1],Object(a.useState)((function(){return JSON.parse(sessionStorage.getItem("token"))||void 0}))),p=Object(i.a)(b,2),m=p[0],f=(p[1],Object(h.k)()),x=function(e){return e.toISOString().slice(0,10)},C=f.location.state,N=["polski","english"],I=Object(a.useState)(void 0),A=Object(i.a)(I,2),E=A[0],T=A[1],B=Object(a.useState)(N[0]),F=Object(i.a)(B,2),P=F[0],R=F[1],U=Object(a.useState)(void 0),J=Object(i.a)(U,2),V=J[0],q=J[1],G=Object(a.useState)(C||void 0),H=Object(i.a)(G,2),M=H[0],W=H[1],Y=Object(a.useState)(M||void 0),_=Object(i.a)(Y,2),$=_[0],X=_[1],Z=Object(a.useState)(void 0),K=Object(i.a)(Z,2),Q=K[0],ee=K[1],te=Object(a.useState)([]),ne=Object(i.a)(te,2),ae=ne[0],ce=ne[1],re=Object(a.useState)([]),se=Object(i.a)(re,2),ie=se[0],oe=se[1],le=Object(a.useState)([]),ue=Object(i.a)(le,2),de=ue[0],je=ue[1],be=Object(a.useState)(x(new Date)),pe=Object(i.a)(be,2),he=pe[0],Oe=pe[1],me=Object(a.useState)(x(new Date((new Date).setDate((new Date).getDate()+14)))),fe=Object(i.a)(me,2),xe=fe[0],ve=fe[1],ge=Object(a.useState)({}),Se=Object(i.a)(ge,2),ye=Se[0],ke=Se[1];Object(a.useEffect)((function(){var e=new AbortController;if(void 0!==E)return"facility"===E?(Object(g.a)(v.a.mark((function t(){var a;return v.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Ne(!0);case 3:(a=t.sent).forEach((function(e){return e.name=n(e.name)})),oe(a),e=null,t.next=13;break;case 9:t.prev=9,t.t0=t.catch(0),console.log(t.t0),l(!0);case 13:case"end":return t.stop()}}),t,null,[[0,9]])})))(),function(){var t;return null===(t=e)||void 0===t?void 0:t.abort()}):(Object(g.a)(v.a.mark((function t(){var a;return v.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Ne(!1);case 3:(a=t.sent).forEach((function(e){return e.name=n(e.name)})),oe(a),e=null,t.next=13;break;case 9:t.prev=9,t.t0=t.catch(0),console.log(t.t0),l(!0);case 13:case"end":return t.stop()}}),t,null,[[0,9]])})))(),function(){var t;return null===(t=e)||void 0===t?void 0:t.abort()})}),[E]),Object(a.useEffect)((function(){var e=new AbortController;if(void 0!==V)return Object(g.a)(v.a.mark((function t(){var n;return v.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Ce();case 3:n=t.sent,je(n),document.querySelector("#doctorr").disabled=!1,e=null,t.next=14;break;case 10:t.prev=10,t.t0=t.catch(0),console.log(t.t0),l(!0);case 14:case"end":return t.stop()}}),t,null,[[0,10]])})))(),function(){var t;return null===(t=e)||void 0===t?void 0:t.abort()}}),[V]),Object(a.useEffect)((function(){if(void 0!==M){if(X(M),document.getElementById("selectedReferral").value=M.id,!0===M.medicalService.facilityService)T("facility"),document.querySelector("#facility").checked=!0;else T("phone"),document.querySelector("#phone").checked=!0;M.medicalService.name=n(M.medicalService.name),q(M.medicalService),document.querySelector("#selectService").disabled=!0}}),[M]),Object(a.useEffect)((function(){if(void 0!==$){if(X($),document.getElementById("selectedReferral").value=$.id,!0===$.medicalService.facilityService){T("facility");var e=document.querySelector("#facility");e.checked=!0,e.disabled=!0,document.querySelector("#phone").disabled=!0}else{T("phone");var t=document.querySelector("#phone");t.checked=!0,t.disabled=!0,document.querySelector("#facility").disabled=!0}q($.medicalService),document.querySelector("#selectService").disabled=!0}}),[$]),Object(a.useEffect)((function(){var e=new AbortController;return Object(g.a)(v.a.mark((function t(){var a,c,r;return v.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=function(e){return e.toISOString().slice(0,10)},t.prev=1,t.next=4,we();case 4:c=t.sent,(r=c.referrals.filter((function(e){return a(new Date(e.expiryDate))>=a(new Date)}))).forEach((function(e){e.medicalService.name=n(e.medicalService.name)})),ce(r),e=null,t.next=15;break;case 11:t.prev=11,t.t0=t.catch(1),console.log(t.t0),l(!0);case 15:case"end":return t.stop()}}),t,null,[[1,11]])})))(),function(){var t;return null===(t=e)||void 0===t?void 0:t.abort()}}),[]);var we=function(){var e=Object(g.a)(v.a.mark((function e(){var t,n;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(D,"/patients/").concat(j,"/referrals?size=100"),{headers:{Authorization:"Bearer ".concat(m)}});case 2:return 403===(t=e.sent).status&&l(!0),e.next=6,t.json();case 6:return n=e.sent,e.abrupt("return",n);case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Ce=function(){var e=Object(g.a)(v.a.mark((function e(){var t,n;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("polski"!==P){e.next=7;break}return e.next=3,fetch("".concat(D,"/doctors/services?language=PL&medicalServiceId=").concat(V.id),{headers:{Authorization:"Bearer ".concat(m)}});case 3:403===(t=e.sent).status&&l(!0),e.next=11;break;case 7:return e.next=9,fetch("".concat(D,"/doctors/services?language=EN&medicalServiceId=").concat(V.id),{headers:{Authorization:"Bearer ".concat(m)}});case 9:403===(t=e.sent).status&&l(!0);case 11:return e.next=13,t.json();case 13:return n=e.sent,e.abrupt("return",n);case 15:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Ne=function(){var e=Object(g.a)(v.a.mark((function e(t){var n,a;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!0!==t){e.next=7;break}return e.next=3,fetch("".concat(D,"/medicalServices?type=FACILITY"),{headers:{Authorization:"Bearer ".concat(m)}});case 3:403===(n=e.sent).status&&l(!0),e.next=11;break;case 7:return e.next=9,fetch("".concat(D,"/medicalServices?type=TELEPHONE"),{headers:{Authorization:"Bearer ".concat(m)}});case 9:403===(n=e.sent).status&&l(!0);case 11:return e.next=13,n.json();case 13:return a=e.sent,e.abrupt("return",a);case 15:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),De=function(e){e.preventDefault();var a=function(){var e={};return void 0===E&&(e.appType=n("appointmentTypeError")),void 0===V&&(e.serviceMess=n("serviceError")),e}();Object.keys(a).length>0?ke(a):t(E,P,V,void 0!==Q?Q:null,he,xe,void 0!==$?$:null)};return!0===o?(c(f),Object(O.jsx)(O.Fragment,{})):Object(O.jsxs)(k.a,{className:"newAppointmentForm",children:[Object(O.jsxs)(k.a.Group,{className:"mb-3",children:[Object(O.jsx)(k.a.Label,{children:n("appointmentType")}),Object(O.jsx)(k.a.Check,{type:"radio",name:"type",id:"facility",label:n("facility"),onClick:function(e){T("facility"),ye.appType&&ke(Object(L.a)(Object(L.a)({},ye),{},Object(z.a)({},"appType",null)))},isInvalid:!!ye.appType}),Object(O.jsx)(k.a.Check,{type:"radio",name:"type",id:"phone",label:n("teleconsultation"),onClick:function(e){T("phone"),ye.appType&&ke(Object(L.a)(Object(L.a)({},ye),{},Object(z.a)({},"appType",null)))},isInvalid:!!ye.appType}),Object(O.jsx)(k.a.Control.Feedback,{type:"invalid",children:ye.appType})]}),Object(O.jsxs)(S.a,{className:"align-items-center mb-3",children:[Object(O.jsx)(y.a,{children:Object(O.jsxs)(k.a.Group,{children:[Object(O.jsxs)(k.a.Label,{children:[n("language"),":"]}),Object(O.jsx)(k.a.Select,{id:"selectedLanguage",onChange:function(e){R(e.target.value)},children:N.map((function(e){return Object(O.jsx)("option",{value:e,children:e})}))})]})}),Object(O.jsx)(y.a,{children:Object(O.jsxs)(k.a.Group,{children:[Object(O.jsxs)(k.a.Label,{children:[n("referral"),":"]}),Object(O.jsxs)(k.a.Select,{id:"selectedReferral",defaultValue:M,onChange:function(e){var t,n=parseInt(e.target.value);0!==n?(X(ae.find((function(e){return e.id===n}))),ke((t={},Object(z.a)(t,"serviceMess",null),Object(z.a)(t,"appType",null),t))):function(e){e.preventDefault(),X(void 0),W(void 0),T(void 0);var t=document.querySelector("#facility");t.checked=!1,t.disabled=!1;var n=document.querySelector("#phone");n.checked=!1,n.disabled=!1,q(void 0),document.querySelector("#selectService").disabled=!1,oe([]),je([])}(e)},children:[!M&&Object(O.jsxs)(O.Fragment,{children:[Object(O.jsx)("option",{value:"0",children:n("useReferral")}),ae.map((function(e){return Object(O.jsx)("option",{value:e.id,children:e.medicalService?n("dueTo")+" "+e.expiryDate+" - "+e.medicalService.name:""})}))]}),M&&Object(O.jsxs)(O.Fragment,{children:[Object(O.jsx)("option",{value:M.id,children:n("dueTo")+" "+M.expiryDate+" - "+M.medicalService.name}),Object(O.jsx)("option",{value:"0",children:n("useReferral")}),ae.filter((function(e){return e.id!==M.id})).map((function(e){return Object(O.jsx)("option",{value:e.id,children:e.medicalService?n("dueTo")+" "+e.expiryDate+" - "+e.medicalService.name:""})}))]})]})]})})]}),Object(O.jsxs)(k.a.Group,{className:"mb-3",children:[Object(O.jsx)(k.a.Label,{children:n("service")}),Object(O.jsxs)(k.a.Select,{id:"selectService",isInvalid:!!ye.serviceMess,onChange:function(e){ee(void 0),je([]);var t=parseInt(e.target.value);q(ie.find((function(e){return e.id===t}))),ye.serviceMess&&ke(Object(L.a)(Object(L.a)({},ye),{},Object(z.a)({},"serviceMess",null)))},children:[Object(O.jsx)("option",{onClick:function(e){return function(e){void 0===$&&(e.preventDefault(),q(void 0),je([]))}(e)},children:$?$.medicalService.name:n("chooseService")}),ie.map((function(e){return Object(O.jsx)("option",{value:e.id,children:e.name})}))]}),Object(O.jsx)(k.a.Control.Feedback,{type:"invalid",children:ye.serviceMess})]}),Object(O.jsxs)(k.a.Group,{className:"mb-3",children:[Object(O.jsx)(k.a.Label,{children:n("doctor")}),Object(O.jsxs)(k.a.Select,{id:"doctorr",onChange:function(e){var t=parseInt(e.target.value);ee(de.find((function(e){return e.id===t})))},children:[Object(O.jsx)("option",{value:"0",children:n("chooseDoctor")}),de.map((function(e){return Object(O.jsx)("option",{value:e.id,children:e.firstName+" "+e.lastName})}))]})]}),Object(O.jsxs)(S.a,{className:"align-items-center mb-3",children:[Object(O.jsx)(y.a,{children:Object(O.jsxs)(k.a.Group,{children:[Object(O.jsx)(k.a.Label,{children:n("dateFrom")}),Object(O.jsx)(k.a.Control,{type:"date",placeholder:n("dateFrom"),value:he,onChange:function(e){return Oe(e.target.value)}})]})}),Object(O.jsx)(y.a,{children:Object(O.jsxs)(k.a.Group,{children:[Object(O.jsx)(k.a.Label,{children:n("dateTo")}),Object(O.jsx)(k.a.Control,{type:"date",placeholder:n("dateTo"),value:xe,onChange:function(e){return ve(e.target.value)}})]})})]}),Object(O.jsx)("div",{style:{display:"flex",justifyContent:"center"},children:Object(O.jsx)(w.a,{variant:"primary",onClick:function(e){return De(e)},children:n("searchAppointment")})})]})})),q=function(e){var t=e.appointment,n=e.setOpenModal,c=e.setSelectedAppointment,r=e.t,s=Object(a.useState)(t),o=Object(i.a)(s,2),l=o[0],u=o[1],d=6e4*(new Date).getTimezoneOffset();Object(a.useEffect)((function(){void 0!==t&&u(t)}),[t]);return Object(O.jsxs)("div",{className:"availableAppointment",title:r("chooseAppointment"),children:[Object(O.jsxs)("div",{className:"availableAppointmentDate",children:[Object(O.jsx)("p",{children:new Date(new Date(l.date)-d).toISOString().slice(0,10)}),Object(O.jsx)("p",{children:new Date(new Date(l.date)-d).toISOString().slice(11,16)})]}),Object(O.jsx)("div",{className:"availableAppointmentDoctor",children:Object(O.jsx)("p",{children:t.doctor?r("doctorTitle")+" "+t.doctor.firstName+" "+t.doctor.lastName:r("medicalStaff")})}),Object(O.jsx)("div",{className:"availableAppointmentBtn",children:Object(O.jsx)("button",{className:"actionButton",onClick:function(e){return function(e){e.preventDefault(),c(l),n(!0)}(e)},children:r("reserve")})})]})},G=function(e){var t=e.selectedAppointment,n=e.setOpenModal,c=e.selectedReferral,r=e.t,s=e.logout,o=Object(a.useState)(!1),l=Object(i.a)(o,2),u=l[0],d=l[1],j=Object(a.useState)((function(){return JSON.parse(sessionStorage.getItem("id"))||void 0})),b=Object(i.a)(j,2),p=b[0],m=(b[1],Object(a.useState)((function(){return JSON.parse(sessionStorage.getItem("token"))||void 0}))),f=Object(i.a)(m,2),x=f[0],v=(f[1],Object(h.k)()),g=Object(a.useState)(t),S=Object(i.a)(g,2),y=S[0],k=S[1],w=Object(a.useState)(c),C=Object(i.a)(w,2),N=C[0],I=C[1],A=6e4*(new Date).getTimezoneOffset();Object(a.useEffect)((function(){void 0!==t&&k(t)}),[t]),Object(a.useEffect)((function(){void 0!==c&&I(c)}),[c]);var z;return!0===u?(s(v),Object(O.jsx)(O.Fragment,{})):Object(O.jsx)("div",{className:"modalBackground",children:Object(O.jsxs)("div",{className:"modalContainer",children:[Object(O.jsx)("div",{className:"titleCloseBtn",children:Object(O.jsx)("button",{onClick:function(){return n(!1)},children:" X"})}),Object(O.jsxs)("div",{className:"modalTitle",children:[Object(O.jsx)("h2",{children:r("confirmAppointment")}),Object(O.jsx)("hr",{})]}),Object(O.jsxs)("div",{className:"modalBody",children:[Object(O.jsxs)("div",{className:"modalSection",children:[Object(O.jsx)("p",{children:r("date")}),Object(O.jsx)("p",{children:new Date(new Date(y.date)-A).toISOString().slice(0,10)})]}),Object(O.jsxs)("div",{className:"modalSection",children:[Object(O.jsx)("p",{children:r("hour")}),Object(O.jsx)("p",{children:new Date(new Date(y.date)-A).toISOString().slice(11,16)})]}),Object(O.jsxs)("div",{className:"modalSection",children:[Object(O.jsx)("p",{children:r("appointmentType")}),Object(O.jsx)("p",{children:"FACILITY"===y.type?r("facility"):r("teleconsultation")})]}),Object(O.jsxs)("div",{className:"modalSection",children:[Object(O.jsx)("p",{children:r("service")}),Object(O.jsx)("p",{children:r(y.service.name)})]}),y.doctor&&Object(O.jsxs)("div",{className:"modalSection",children:[Object(O.jsx)("p",{children:r("doctor")}),Object(O.jsx)("p",{children:y.doctor.firstName+" "+y.doctor.lastName})]}),null!==N&&Object(O.jsxs)("div",{className:"modalSection",children:[Object(O.jsx)("p",{children:r("usedReferral")}),Object(O.jsx)("p",{children:r(N?"yes":"no")})]}),new Date(new Date(y.date)-A).toISOString().slice(0,10)===(z=new Date,z.toISOString().slice(0,10))&&Object(O.jsx)("div",{className:"warning",children:Object(O.jsx)("p",{children:r("appointmentAutoConfirm")})}),Object(O.jsxs)("div",{className:"modalFooter",children:[Object(O.jsx)("button",{onClick:function(){return n(!1)},className:"cancelButton",children:r("cancel")}),Object(O.jsx)("button",{onClick:function(e){return function(e){var n;e.preventDefault(),n=null!==N?{patientId:p,referralId:N.id}:{patientId:p},(new Date).toISOString().slice(0,10)===new Date(new Date(y.date)-A).toISOString().slice(0,10)&&(n=Object(L.a)(Object(L.a)({},n),{},{confirmed:!0})),fetch("".concat(D,"/appointments/").concat(t.id,"/reserve"),{method:"PATCH",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(x)},body:JSON.stringify(n)}).then((function(e){403===e.status?d(!0):window.alert(r("appointmentReserved"))})).then(v.push({pathname:"/appointments"})).catch((function(e){return console.log(e)}))}(e)},children:r("confirm")})]})]})]})})},H=Object(h.o)((function(e){var t=e.t,n=e.logout,c=Object(h.k)(),r=Object(a.useState)(!1),s=Object(i.a)(r,2),o=s[0],l=s[1],u=Object(a.useState)((function(){return JSON.parse(sessionStorage.getItem("token"))||void 0})),d=Object(i.a)(u,2),j=d[0],b=(d[1],Object(a.useState)([])),p=Object(i.a)(b,2),m=p[0],f=p[1],x=Object(a.useState)(void 0),S=Object(i.a)(x,2),y=S[0],k=S[1],w=Object(a.useState)(void 0),C=Object(i.a)(w,2),N=C[0],I=C[1],A=Object(a.useState)(void 0),z=Object(i.a)(A,2),L=z[0],E=z[1],T=Object(a.useState)(!1),B=Object(i.a)(T,2),F=B[0],P=B[1],R=Object(a.useState)(void 0),J=Object(i.a)(R,2),H=J[0],M=J[1],W=Object(a.useState)(void 0),Y=Object(i.a)(W,2),_=Y[0],$=Y[1],X=Object(a.useState)(void 0),Z=Object(i.a)(X,2),K=Z[0],Q=Z[1],ee=Object(a.useState)(void 0),te=Object(i.a)(ee,2),ne=te[0],ae=te[1],ce=[3,5,10],re=Object(a.useState)(1),se=Object(i.a)(re,2),ie=se[0],oe=se[1],le=Object(a.useState)(0),ue=Object(i.a)(le,2),de=ue[0],je=ue[1],be=Object(a.useState)(ce[0]),pe=Object(i.a)(be,2),he=pe[0],Oe=pe[1],me=function(e,t){var n={};return e&&(n.page=e-1),t&&(n.size=t),n};Object(a.useEffect)((function(){if(void 0!==y){var e=function(){var e=Object(g.a)(v.a.mark((function e(){var t;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fe();case 2:t=e.sent,je(t.totalPages),f(t.appointments);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();e()}}),[y,ie,he]),Object(a.useEffect)((function(){void 0!==N&&I(N)}),[N]);var fe=function(){var e=Object(g.a)(v.a.mark((function e(){var t,n,a,c;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=me(ie,he),n=(new Date).toString().slice(16,24),null===K){e.next=30;break}if(null===t.page||null===t.size){e.next=10;break}return e.next=6,fetch("".concat(D,"/appointments?medicalServiceId=").concat(y.id,"&doctorId=").concat(K.id,"&dateFrom=").concat(H,"T").concat(n,"&dateTo=").concat(_,"T23:59:00&language=").concat(ne,"&page=").concat(t.page,"&size=").concat(t.size),{headers:{Authorization:"Bearer ".concat(j)}});case 6:403===(a=e.sent).status&&l(!0),e.next=28;break;case 10:if(null===t.page||null!==t.size){e.next=17;break}return e.next=13,fetch("".concat(D,"/appointments?medicalServiceId=").concat(y.id,"&doctorId=").concat(K.id,"&dateFrom=").concat(H,"T").concat(n,"&dateTo=").concat(_,"T23:59:00&language=").concat(ne,"&page=").concat(t.page),{headers:{Authorization:"Bearer ".concat(j)}});case 13:403===(a=e.sent).status&&l(!0),e.next=28;break;case 17:if(null!==t.page||null===t.size){e.next=24;break}return e.next=20,fetch("".concat(D,"/appointments?medicalServiceId=").concat(y.id,"&doctorId=").concat(K.id,"&dateFrom=").concat(H,"T").concat(n,"&dateTo=").concat(_,"T23:59:00&language=").concat(ne,"&size=").concat(t.size),{headers:{Authorization:"Bearer ".concat(j)}});case 20:403===(a=e.sent).status&&l(!0),e.next=28;break;case 24:return e.next=26,fetch("".concat(D,"/appointments?medicalServiceId=").concat(y.id,"&doctorId=").concat(K.id,"&dateFrom=").concat(H,"T").concat(n,"&dateTo=").concat(_,"T23:59:00&language=").concat(ne),{headers:{Authorization:"Bearer ".concat(j)}});case 26:403===(a=e.sent).status&&l(!0);case 28:e.next=55;break;case 30:if(null===t.page||null===t.size){e.next=37;break}return e.next=33,fetch("".concat(D,"/appointments?medicalServiceId=").concat(y.id,"&dateFrom=").concat(H,"T").concat(n,"&dateTo=").concat(_,"T23:59:00&language=").concat(ne,"&page=").concat(t.page,"&size=").concat(t.size),{headers:{Authorization:"Bearer ".concat(j)}});case 33:403===(a=e.sent).status&&l(!0),e.next=55;break;case 37:if(null===t.page||null!==t.size){e.next=44;break}return e.next=40,fetch("".concat(D,"/appointments?medicalServiceId=").concat(y.id,"&dateFrom=").concat(H,"T").concat(n,"&dateTo=").concat(_,"T23:59:00&language=").concat(ne,"&page=").concat(t.page),{headers:{Authorization:"Bearer ".concat(j)}});case 40:403===(a=e.sent).status&&l(!0),e.next=55;break;case 44:if(null!==t.page||null===t.size){e.next=51;break}return e.next=47,fetch("".concat(D,"/appointments?medicalServiceId=").concat(y.id,"&dateFrom=").concat(H,"T").concat(n,"&dateTo=").concat(_,"T23:59:00&language=").concat(ne,"&size=").concat(t.size),{headers:{Authorization:"Bearer ".concat(j)}});case 47:403===(a=e.sent).status&&l(!0),e.next=55;break;case 51:return e.next=53,fetch("".concat(D,"/appointments?medicalServiceId=").concat(y.id,"&dateFrom=").concat(H,"T").concat(n,"&dateTo=").concat(_,"T23:59:00&language=").concat(ne),{headers:{Authorization:"Bearer ".concat(j)}});case 53:403===(a=e.sent).status&&l(!0);case 55:return e.next=57,a.json();case 57:return c=e.sent,e.abrupt("return",c);case 59:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return!0===o?(n(c),Object(O.jsx)(O.Fragment,{})):Object(O.jsxs)("div",{className:"itemsList",children:[Object(O.jsx)("div",{className:"listHeader",children:Object(O.jsx)("h2",{children:t("newAppointment")})}),Object(O.jsx)(V,{getAppointments:function(e,t,n,a,c,r,s){k(n),E(s),M(c),$(r),Q(a),ae("polski"===t?"PL":"EN")},t:t,logout:n}),Object(O.jsxs)(O.Fragment,{children:[m.length>0&&Object(O.jsxs)(O.Fragment,{children:[Object(O.jsx)("h3",{style:{fontFamily:"Montserrat, sans-serif"},children:t("availableAppointments")}),Object(O.jsxs)("div",{className:"itemsNumber availableAppsPagination",children:[Object(O.jsxs)("p",{children:[t("elementsNumber"),"\xa0"]}),Object(O.jsx)("select",{onChange:function(e){Oe(e.target.value),oe(1)},value:he,children:ce.map((function(e){return Object(O.jsx)("option",{value:e,children:e},e)}))})]})]}),m.length>0?m.map((function(e){return Object(O.jsx)(q,{appointment:e,setOpenModal:P,setSelectedAppointment:I,t:t},e.id)})):void 0!==y?t("noAppointments"):"",m.length>0&&Object(O.jsx)(U.a,{className:"my-3",count:de,page:ie,siblingCount:1,boundaryCount:1,shape:"rounded",onChange:function(e,t){oe(t)}}),F&&void 0!==N?Object(O.jsx)(G,{selectedAppointment:N,setOpenModal:P,selectedReferral:L,t:t,logout:n}):""]})]})})),M=function(e){var t=e.referral,n=e.setSelectedReferral,c=e.t,r=Object(h.k)(),s=Object(a.useState)(t),o=Object(i.a)(s,2),l=o[0],u=o[1],d=function(e){return e.toISOString().slice(0,10)};Object(a.useEffect)((function(){void 0!==t&&u(t)}),[t]);return Object(O.jsxs)("div",{className:"referral",children:[Object(O.jsx)("div",{className:"referralDiv1",children:Object(O.jsx)("p",{className:"referralHeader",children:c(l.medicalService.name)})}),Object(O.jsxs)("div",{className:"referralDiv2",children:[Object(O.jsxs)("p",{children:[c("issueDate"),"\xa0",l.issueDate]}),Object(O.jsxs)("p",{children:[c("referralValidUntil"),"\xa0",l.expiryDate]})]}),Object(O.jsx)("hr",{}),Object(O.jsx)("div",{style:{display:"flex",justifyContent:"flex-end"},children:d(new Date(l.expiryDate))>=d(new Date)?Object(O.jsx)("button",{className:"actionButton",onClick:function(e){return function(e){e.preventDefault(),n(t),r.push({pathname:"/new-appointment",state:l})}(e)},children:c("makeAppointment")}):Object(O.jsx)("p",{style:{color:"red"},children:c("referralInvalid")})})]})},W=function(e){var t=e.t,n=e.logout,c=Object(h.k)(),r=Object(a.useState)((function(){return JSON.parse(sessionStorage.getItem("id"))||void 0})),s=Object(i.a)(r,2),o=s[0],l=(s[1],Object(a.useState)((function(){return JSON.parse(sessionStorage.getItem("token"))||void 0}))),u=Object(i.a)(l,2),d=u[0],j=(u[1],Object(a.useState)([])),b=Object(i.a)(j,2),p=b[0],m=b[1],f=Object(a.useState)(void 0),x=Object(i.a)(f,2),S=x[0],y=x[1],k=[3,5,10],w=Object(a.useState)(1),C=Object(i.a)(w,2),N=C[0],I=C[1],A=Object(a.useState)(0),z=Object(i.a)(A,2),L=z[0],E=z[1],T=Object(a.useState)(k[0]),B=Object(i.a)(T,2),F=B[0],P=B[1],R=Object(a.useState)(!1),J=Object(i.a)(R,2),V=J[0],q=J[1],G=function(e,t){var n={};return e&&(n.page=e-1),t&&(n.size=t),n};Object(a.useEffect)((function(){var e=new AbortController;return Object(g.a)(v.a.mark((function t(){var n;return v.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,H();case 3:n=t.sent,m(n.referrals),E(n.totalPages),e=null,t.next=13;break;case 9:t.prev=9,t.t0=t.catch(0),console.log(t.t0),q(!0);case 13:case"end":return t.stop()}}),t,null,[[0,9]])})))(),function(){var t;return null===(t=e)||void 0===t?void 0:t.abort()}}),[N,F]),Object(a.useEffect)((function(){void 0!==S&&m(p.filter(W))}),[S]);var H=function(){var e=Object(g.a)(v.a.mark((function e(){var t,n,a;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null===(t=G(N,F)).page||null===t.size){e.next=8;break}return e.next=4,fetch("".concat(D,"/patients/").concat(o,"/referrals?page=").concat(t.page,"&size=").concat(t.size),{headers:{Authorization:"Bearer ".concat(d)}});case 4:403===(n=e.sent).status&&q(!0),e.next=26;break;case 8:if(null===t.page||null!==t.size){e.next=15;break}return e.next=11,fetch("".concat(D,"/patients/").concat(o,"/referrals?page=").concat(t.page),{headers:{Authorization:"Bearer ".concat(d)}});case 11:403===(n=e.sent).status&&q(!0),e.next=26;break;case 15:if(null!==t.page||null===t.size){e.next=22;break}return e.next=18,fetch("".concat(D,"/patients/").concat(o,"/referrals?size=").concat(t.size),{headers:{Authorization:"Bearer ".concat(d)}});case 18:403===(n=e.sent).status&&q(!0),e.next=26;break;case 22:return e.next=24,fetch("".concat(D,"/patients/").concat(o,"/referrals"),{headers:{Authorization:"Bearer ".concat(d)}});case 24:403===(n=e.sent).status&&q(!0);case 26:return e.next=28,n.json();case 28:return a=e.sent,e.abrupt("return",a);case 30:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),W=function(e){if(e.id!==S.id)return e};return!0===V?(n(c),Object(O.jsx)(O.Fragment,{})):Object(O.jsxs)("div",{className:"itemsList",children:[Object(O.jsx)("div",{className:"listHeader",children:Object(O.jsx)("h2",{children:t("yourReferrals")})}),p.length>0&&Object(O.jsxs)("div",{className:"itemsNumber",children:[Object(O.jsxs)("p",{children:[t("elementsNumber"),"\xa0"]}),Object(O.jsx)("select",{onChange:function(e){P(e.target.value),I(1)},value:F,children:k.map((function(e){return Object(O.jsx)("option",{value:e,children:e},e)}))})]}),p.length>0?Object(O.jsxs)(O.Fragment,{children:[p.map((function(e){return Object(O.jsx)(M,{referral:e,setSelectedReferral:y,t:t},e.id)})),Object(O.jsx)(U.a,{className:"my-3",count:L,page:N,siblingCount:1,boundaryCount:1,shape:"rounded",onChange:function(e,t){I(t)}})]}):t("noReferrals")]})},Y=n(434),_=n(69),$=n(44),X=n(433),Z=n(36),K=Object(X.a)((function(e){return{todayCell:{backgroundColor:Object(Z.fade)(e.palette.primary.main,.1),"&:hover":{backgroundColor:Object(Z.fade)(e.palette.primary.main,.14)},"&:focus":{backgroundColor:Object(Z.fade)(e.palette.primary.main,.16)}},weekendCell:{backgroundColor:Object(Z.fade)(e.palette.action.disabledBackground,.04),"&:hover":{backgroundColor:Object(Z.fade)(e.palette.action.disabledBackground,.04)},"&:focus":{backgroundColor:Object(Z.fade)(e.palette.action.disabledBackground,.04)}},today:{backgroundColor:Object(Z.fade)(e.palette.primary.main,.16)},weekend:{backgroundColor:Object(Z.fade)(e.palette.action.disabledBackground,.06)}}})),Q=function(e){var t=K(),n=e.startDate,a=new Date(n);return a.getDate()===(new Date).getDate()?Object(O.jsx)(_.f.TimeTableCell,Object(L.a)(Object(L.a)({},e),{},{className:t.todayCell})):0===a.getDay()||6===a.getDay()?Object(O.jsx)(_.f.TimeTableCell,Object(L.a)(Object(L.a)({},e),{},{className:t.weekendCell})):Object(O.jsx)(_.f.TimeTableCell,Object(L.a)({},e))},ee=function(e){var t=K(),n=e.startDate;return e.today?Object(O.jsx)(_.f.DayScaleCell,Object(L.a)(Object(L.a)({},e),{},{className:t.today})):0===n.getDay()||6===n.getDay()?Object(O.jsx)(_.f.DayScaleCell,Object(L.a)(Object(L.a)({},e),{},{className:t.weekend})):Object(O.jsx)(_.f.DayScaleCell,Object(L.a)({},e))},te=function(e){var t=e.schedule,n=Object(a.useState)([]),c=Object(i.a)(n,2),r=c[0],s=c[1];function o(e){var t,n,a,c,r;return t=e.substring(0,4)-0,n=e.substring(5,7)-1,a=e.substring(8,10)-0,c=e.substring(11,13)-0,r=e.substring(14,16)-0,new Date(t,n,a,c,r)}return Object(a.useEffect)((function(){if(void 0!==t){var e=function(e){var t=[];return Object.entries(e).forEach((function(e){var n=Object(i.a)(e,2),a=(n[0],n[1]);return Object.entries(a).forEach((function(e){var n=Object(i.a)(e,2),a=(n[0],n[1]),c=new Object;c.startDate=o(a.startDate),c.endDate=o(a.endDate),t.push(c)}))})),t}(t);s(e)}}),[t]),Object(O.jsx)(Y.a,{children:Object(O.jsxs)(_.c,{data:r,firstDayOfWeek:1,locale:"pl-PL",children:[Object(O.jsx)($.q,{}),Object(O.jsx)(_.f,{startDayHour:8,endDayHour:18,timeTableCellComponent:Q,dayScaleCellComponent:ee}),Object(O.jsx)(_.e,{}),Object(O.jsx)(_.b,{}),Object(O.jsx)(_.d,{}),Object(O.jsx)(_.a,{})]})})},ne=function(e){var t=e.t,n=e.logout,c=Object(h.k)(),r=Object(a.useState)((function(){return JSON.parse(sessionStorage.getItem("token"))||void 0})),s=Object(i.a)(r,2),o=s[0],l=(s[1],Object(a.useState)([])),u=Object(i.a)(l,2),d=u[0],j=u[1],b=Object(a.useState)([]),p=Object(i.a)(b,2),m=p[0],f=p[1],x=Object(a.useState)(void 0),C=Object(i.a)(x,2),N=C[0],I=C[1],A=Object(a.useState)(void 0),E=Object(i.a)(A,2),T=E[0],B=E[1],F=Object(a.useState)(void 0),P=Object(i.a)(F,2),R=P[0],U=P[1],J=Object(a.useState)({}),V=Object(i.a)(J,2),q=V[0],G=V[1],H=Object(a.useRef)(),M=Object(a.useState)(!1),W=Object(i.a)(M,2),Y=W[0],_=W[1];Object(a.useEffect)((function(){var e=new AbortController;return Object(g.a)(v.a.mark((function n(){var a;return v.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,$();case 3:(a=n.sent).forEach((function(e){e.name=t(e.name)})),j(a),e=null,n.next=13;break;case 9:n.prev=9,n.t0=n.catch(0),console.log(n.t0),_(!0);case 13:case"end":return n.stop()}}),n,null,[[0,9]])})))(),function(){var t;return null===(t=e)||void 0===t?void 0:t.abort()}}),[]),Object(a.useEffect)((function(){var e=new AbortController;if(void 0!==N)return Object(g.a)(v.a.mark((function t(){var n;return v.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,X();case 3:n=t.sent,f(n),e=null,t.next=12;break;case 8:t.prev=8,t.t0=t.catch(0),console.log(t.t0),_(!0);case 12:case"end":return t.stop()}}),t,null,[[0,8]])})))(),function(){var t;return null===(t=e)||void 0===t?void 0:t.abort()}}),[N]);var $=function(){var e=Object(g.a)(v.a.mark((function e(){var t,n;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(D,"/specializations"),{headers:{Authorization:"Bearer ".concat(o)}});case 2:return 403===(t=e.sent).status&&_(!0),e.next=6,t.json();case 6:return n=e.sent,e.abrupt("return",n);case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),X=function(){var e=Object(g.a)(v.a.mark((function e(){var t,n;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(D,"/doctors/specialization?id=").concat(N.id),{headers:{Authorization:"Bearer ".concat(o)}});case 2:return 403===(t=e.sent).status&&_(!0),e.next=6,t.json();case 6:return n=e.sent,e.abrupt("return",n);case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();function Z(e){e.preventDefault();var n=function(){var e={};return void 0===N&&(e.specialization=t("specializationError")),void 0===T&&(e.doctor=t("doctorError")),e}();Object.keys(n).length>0?G(n):fetch("".concat(D,"/doctors/").concat(T.id,"/schedule?specializationId=").concat(N.id),{headers:{Authorization:"Bearer ".concat(o)}}).then((function(e){return e.json()})).then((function(e){U(e)})).catch((function(e){return console.log(e)}))}return!0===Y?(n(c),Object(O.jsx)(O.Fragment,{})):Object(O.jsxs)("div",{className:"itemsList",children:[Object(O.jsx)("div",{className:"listHeader",children:Object(O.jsx)("h2",{children:t("doctorSchedule")})}),Object(O.jsxs)(k.a,{className:"newAppointmentForm",children:[Object(O.jsx)(S.a,{className:"align-items-center mb-3",children:Object(O.jsx)(y.a,{children:Object(O.jsxs)(k.a.Group,{children:[Object(O.jsxs)(k.a.Label,{children:[t("chooseSpecialization"),":"]}),Object(O.jsxs)(k.a.Select,{id:"selectedSpecialization",isInvalid:!!q.specialization,onChange:function(e){var n=parseInt(e.target.value);B(void 0),H.current.value=t("chooseDoctor"),U(void 0),I(d.find((function(e){return e.id===n}))),q.specialization&&G(Object(L.a)(Object(L.a)({},q),{},Object(z.a)({},"specialization",null)))},children:[Object(O.jsx)("option",{onClick:function(){I(void 0),f([]),U(void 0)},children:t("chooseSpecialization")}),d.map((function(e){return Object(O.jsx)("option",{value:e.id,children:e.name})}))]}),Object(O.jsx)(k.a.Control.Feedback,{type:"invalid",children:q.specialization})]})})}),Object(O.jsx)(S.a,{className:"align-items-center mb-3",children:Object(O.jsx)(y.a,{children:Object(O.jsxs)(k.a.Group,{children:[Object(O.jsxs)(k.a.Label,{children:[t("chooseDoctor"),":"]}),Object(O.jsxs)(k.a.Select,{id:"selectedDoctor",isInvalid:!!q.doctor,ref:H,onChange:function(e){var t=parseInt(e.target.value);B(m.find((function(e){return e.id===t}))),U(void 0),q.doctor&&G(Object(L.a)(Object(L.a)({},q),{},Object(z.a)({},"doctor",null)))},children:[Object(O.jsx)("option",{onClick:function(){B(void 0),U(void 0)},children:t("chooseDoctor")}),m.map((function(e){return Object(O.jsx)("option",{value:e.id,children:e.firstName+" "+e.lastName})}))]}),Object(O.jsx)(k.a.Control.Feedback,{type:"invalid",children:q.doctor})]})})}),Object(O.jsx)("div",{style:{display:"flex",justifyContent:"center"},children:Object(O.jsx)(w.a,{variant:"primary",onClick:function(e){return Z(e)},children:t("showSchedule")})})]}),void 0!==R&&void 0!==T&&void 0!==N&&Object(O.jsx)(te,{schedule:R})]})},ae=function(e){var t=e.checkup,n=e.t,c=Object(a.useState)((function(){return JSON.parse(sessionStorage.getItem("id"))||void 0})),r=Object(i.a)(c,2),s=r[0],o=(r[1],Object(a.useState)((function(){return JSON.parse(sessionStorage.getItem("token"))||void 0}))),l=Object(i.a)(o,2),u=l[0],d=(l[1],Object(a.useState)(!1)),j=Object(i.a)(d,2),b=j[0],p=j[1],h=Object(a.useState)(t),m=Object(i.a)(h,2),f=m[0],x=m[1];return Object(a.useEffect)((function(){void 0!==t&&x(t)}),[t]),Object(O.jsxs)("div",{className:"appointmentAndCheckup",onClick:function(e){return function(e){e.preventDefault(),p(!b)}(e)},children:[Object(O.jsxs)("div",{className:"top",children:[Object(O.jsx)("p",{className:"appointmentAndCheckupHeader",children:n(f.diagnosticTestName)}),Object(O.jsxs)("div",{className:"data",children:[Object(O.jsx)("p",{children:n("date")}),Object(O.jsx)("p",{children:new Date(f.appointmentDate).toISOString().slice(0,10)}),Object(O.jsx)("p",{children:new Date(f.appointmentDate).toISOString().slice(11,16)})]})]}),Object(O.jsxs)("div",{children:[Object(O.jsx)(F.d,{size:42}),n("doctorTitle")+" "+f.doctorFirstName+" "+f.doctorLastName]}),b?Object(O.jsxs)("div",{children:[Object(O.jsx)("hr",{}),Object(O.jsxs)("div",{className:"subsections",children:[Object(O.jsx)(F.c,{size:42}),Object(O.jsx)("p",{className:"header",children:n("checkUpDescription")})]}),Object(O.jsx)("div",{className:"subsections",children:Object(O.jsx)("p",{children:f.doctorsDescription})}),Object(O.jsx)("hr",{}),Object(O.jsxs)("div",{className:"subsections",children:[Object(O.jsx)(F.a,{size:42}),Object(O.jsx)("p",{className:"header",children:n("result")})]}),Object(O.jsx)("div",{children:Object(O.jsx)("p",{children:f.result?f.result:n("resultNotAvailable")})}),null!==f.result&&f.file&&Object(O.jsxs)(O.Fragment,{children:[Object(O.jsx)("hr",{}),Object(O.jsxs)("div",{className:"subsections",children:[Object(O.jsx)(F.b,{size:42}),Object(O.jsx)("p",{className:"header",children:n("downloadResultPDF")}),Object(O.jsx)(w.a,{className:"download",href:"".concat(D,"/patients/").concat(s,"/diagnosticTests"),onClick:function(e){!function(e,t){e.preventDefault(),fetch("".concat(D,"/appointments/diagnosticTests?appointmentId=").concat(t.appointmentId,"&checkUpId=").concat(t.checkUpId),{headers:{Authorization:"Bearer ".concat(u)}}).then((function(e){return e.json()})).then((function(e){var t=window.document.createElement("a"),a=new Uint8Array(e.file);t.href=window.URL.createObjectURL(new Blob([a],{type:"application/pdf"}));var c=new Date(e.appointmentDate).toISOString().slice(0,10);t.download=n("checkUpFileName")+String(c),document.body.appendChild(t),t.click(),document.body.removeChild(t)}))}(e,t)},children:n("download")})]})]})]}):null]})},ce=function(e){var t=e.appointment,n=e.t,a=Object(h.k)(),c=function(e){e.preventDefault();var n=e.target.id;"visitButton"===n?a.push({pathname:"/today-visits/".concat(t.id,"/details/visits-history"),state:t}):"checkUpButton"===n?a.push({pathname:"/today-visits/".concat(t.id,"/details/check-ups"),state:t}):"backButton"===n?a.push({pathname:"/today-visits/".concat(t.id,"/details"),state:t}):a.push({pathname:"/today-visits/".concat(t.id,"/details/files"),state:t})};return Object(O.jsxs)("div",{className:"topBuffer",style:{display:"flex",justifyContent:"space-between",width:"60%"},children:[(window.location.href.indexOf("visits-history")>-1||window.location.href.indexOf("check-ups")>-1||window.location.href.indexOf("details/files")>-1)&&Object(O.jsx)("button",{id:"backButton",className:"actionButton",onClick:c,children:n("backToDetailsButton")}),window.location.href.indexOf("visits-history")<0&&Object(O.jsx)("button",{id:"visitButton",className:"actionButton",onClick:c,children:n("visitsHistoryButton")}),window.location.href.indexOf("check-ups")<0&&Object(O.jsx)("button",{id:"checkUpButton",className:"actionButton",onClick:c,children:n("checkUpsButton")}),window.location.href.indexOf("details/files")<0&&Object(O.jsx)("button",{id:"filesButton",className:"actionButton",onClick:c,children:n("patientFilesButton")})]})},re=function(e){var t=e.t,n=e.logout,c=Object(a.useState)(!1),r=Object(i.a)(c,2),s=r[0],o=r[1],l=Object(a.useState)((function(){return JSON.parse(sessionStorage.getItem("id"))||void 0})),u=Object(i.a)(l,2),d=u[0],j=(u[1],Object(a.useState)((function(){return JSON.parse(sessionStorage.getItem("token"))||void 0}))),b=Object(i.a)(j,2),p=b[0],m=(b[1],Object(h.k)()),f=m.location.state,x=Object(a.useState)(f||void 0),S=Object(i.a)(x,2),y=S[0],k=(S[1],Object(h.l)(),[3,5,10]),w=Object(a.useState)([]),C=Object(i.a)(w,2),N=C[0],I=C[1],A=Object(a.useState)(1),z=Object(i.a)(A,2),L=z[0],E=z[1],T=Object(a.useState)(0),B=Object(i.a)(T,2),F=B[0],P=B[1],R=Object(a.useState)(k[0]),J=Object(i.a)(R,2),V=J[0],q=J[1],G=function(e,t){var n={};return e&&(n.page=e-1),t&&(n.size=t),n};Object(a.useEffect)((function(){var e=function(){var e=Object(g.a)(v.a.mark((function e(){var t;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,H();case 2:t=e.sent,I(t.diagnosticTests),P(t.totalPages);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();e()}),[L,V]);var H=function(){var e=Object(g.a)(v.a.mark((function e(){var t,n,a;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=G(L,V),void 0!==y){e.next=29;break}if(null===t.page||null===t.size){e.next=9;break}return e.next=5,fetch("".concat(D,"/patients/").concat(d,"/diagnosticTests?page=").concat(t.page,"&size=").concat(t.size),{headers:{Authorization:"Bearer ".concat(p)}});case 5:403===(n=e.sent).status&&o(!0),e.next=27;break;case 9:if(null===t.page||null!==t.size){e.next=16;break}return e.next=12,fetch("".concat(D,"/patients/").concat(d,"/diagnosticTests?page=").concat(t.page),{headers:{Authorization:"Bearer ".concat(p)}});case 12:403===(n=e.sent).status&&o(!0),e.next=27;break;case 16:if(null!==t.page||null===t.size){e.next=23;break}return e.next=19,fetch("".concat(D,"/patients/").concat(d,"/diagnosticTests?size=").concat(t.size),{headers:{Authorization:"Bearer ".concat(p)}});case 19:403===(n=e.sent).status&&o(!0),e.next=27;break;case 23:return e.next=25,fetch("".concat(D,"/patients/").concat(d,"/diagnosticTests"),{headers:{Authorization:"Bearer ".concat(p)}});case 25:403===(n=e.sent).status&&o(!0);case 27:e.next=54;break;case 29:if(null===t.page||null===t.size){e.next=36;break}return e.next=32,fetch("".concat(D,"/patients/").concat(y.patient.id,"/diagnosticTests?page=").concat(t.page,"&size=").concat(t.size),{headers:{Authorization:"Bearer ".concat(p)}});case 32:403===(n=e.sent).status&&o(!0),e.next=54;break;case 36:if(null===t.page||null!==t.size){e.next=43;break}return e.next=39,fetch("".concat(D,"/patients/").concat(y.patient.id,"/diagnosticTests?page=").concat(t.page),{headers:{Authorization:"Bearer ".concat(p)}});case 39:403===(n=e.sent).status&&o(!0),e.next=54;break;case 43:if(null!==t.page||null===t.size){e.next=50;break}return e.next=46,fetch("".concat(D,"/patients/").concat(y.patient.id,"/diagnosticTests?size=").concat(t.size),{headers:{Authorization:"Bearer ".concat(p)}});case 46:403===(n=e.sent).status&&o(!0),e.next=54;break;case 50:return e.next=52,fetch("".concat(D,"/patients/").concat(y.patient.id,"/diagnosticTests"),{headers:{Authorization:"Bearer ".concat(p)}});case 52:403===(n=e.sent).status&&o(!0);case 54:return e.next=56,n.json();case 56:return a=e.sent,e.abrupt("return",a);case 58:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return!0===s?(n(m),Object(O.jsx)(O.Fragment,{})):Object(O.jsxs)("div",{className:"itemsList",children:[Object(O.jsx)("div",{className:"listHeader",children:Object(O.jsx)("h2",{children:t(y?"checkupsHistory":"yourCheckUps")})}),Object(O.jsx)("br",{}),void 0!==y&&Object(O.jsx)(ce,{appointment:y,t:t}),N.length>0&&Object(O.jsxs)("div",{className:"itemsNumber",children:[Object(O.jsxs)("p",{children:[t("elementsNumber"),"\xa0"]}),Object(O.jsx)("select",{onChange:function(e){q(e.target.value),E(1)},value:V,children:k.map((function(e){return Object(O.jsx)("option",{value:e,children:e},e)}))})]}),N.length>0?Object(O.jsxs)(O.Fragment,{children:[N.map((function(e){return Object(O.jsx)(ae,{checkup:e,t:t,logout:n},e.id)})),Object(O.jsx)(U.a,{className:"my-3",count:F,page:L,siblingCount:1,boundaryCount:1,shape:"rounded",onChange:function(e,t){E(t)}})]}):t("noCheckUps")]})},se=function(e){var t=e.prescription,n=e.t;return Object(O.jsxs)("tr",{children:[Object(O.jsx)("td",{children:t.creationDate}),Object(O.jsx)("td",{children:t.medications?Object(O.jsx)("ul",{children:t.medications.map((function(e){return Object(O.jsx)("li",{children:e.name},e.id)}))}):""}),Object(O.jsx)("td",{children:t.medications?Object(O.jsx)("ul",{children:t.medications.map((function(e){return Object(O.jsx)("li",{children:e.numberOfPackages},e.id)}))}):""}),Object(O.jsx)("td",{children:n("issued")}),Object(O.jsx)("td",{children:t.accessCode}),Object(O.jsx)("td",{children:t.doctorFirstName+" "+t.doctorLastName}),Object(O.jsx)("td",{children:t.doctorPwz})]},t.id)},ie=function(e){var t=e.prescriptionData,n=e.t;return Object(O.jsxs)("table",{className:"table table-hover fileTable",style:{backgroundColor:"white",width:"90%"},children:[Object(O.jsx)("thead",{children:Object(O.jsxs)("tr",{children:[Object(O.jsx)("th",{children:n("issueDate")}),Object(O.jsx)("th",{children:n("medications")}),Object(O.jsx)("th",{children:n("numberOfPackages")}),Object(O.jsx)("th",{children:n("status")}),Object(O.jsx)("th",{children:n("eReceiptCode")}),Object(O.jsx)("th",{children:n("doctor")}),Object(O.jsx)("th",{children:"PWZ:"})]})}),Object(O.jsx)("tbody",{children:t.map((function(e){return Object(O.jsx)(se,{t:n,prescription:e},e.id)}))})]})},oe=function(e){var t=e.t,n=e.logout,c=Object(h.k)(),r=Object(a.useState)(!1),s=Object(i.a)(r,2),o=s[0],l=s[1],u=Object(a.useState)((function(){return JSON.parse(sessionStorage.getItem("id"))||void 0})),d=Object(i.a)(u,3),j=d[0],b=(d[2],Object(a.useState)((function(){return JSON.parse(sessionStorage.getItem("token"))||void 0}))),p=Object(i.a)(b,2),m=p[0],f=(p[1],Object(a.useState)([])),x=Object(i.a)(f,2),S=x[0],y=x[1];Object(a.useEffect)((function(){var e=new AbortController;return Object(g.a)(v.a.mark((function t(){var n;return v.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,k();case 3:n=t.sent,y(n),e=null,t.next=12;break;case 8:t.prev=8,t.t0=t.catch(0),console.log(t.t0),l(!0);case 12:case"end":return t.stop()}}),t,null,[[0,8]])})))(),function(){var t;return null===(t=e)||void 0===t?void 0:t.abort()}}),[]);var k=function(){var e=Object(g.a)(v.a.mark((function e(){var t,n;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(D,"/patients/").concat(j,"/prescriptions"),{headers:{Authorization:"Bearer ".concat(m)}});case 2:return 403===(t=e.sent).status&&l(!0),e.next=6,t.json();case 6:return n=e.sent,e.abrupt("return",n);case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return!0===o?(n(c),Object(O.jsx)(O.Fragment,{})):Object(O.jsxs)("div",{className:"itemsList",children:[Object(O.jsx)("div",{className:"listHeader",children:Object(O.jsx)("h2",{children:t("yourPrescriptions")})}),Object(O.jsx)("div",{className:"appointmentList",children:S.length>0?Object(O.jsx)(ie,{prescriptionData:S,t:t}):t("noPrescriptions")})]})},le=function(e){var t=e.changeLanguage,n=e.t;return Object(O.jsxs)("div",{children:[Object(O.jsx)("div",{style:{textAlign:"center",marginBottom:"10px"},children:Object(O.jsxs)("h4",{children:[n("chooseLanguage"),":"]})}),Object(O.jsxs)("div",{style:{display:"flex",justifyContent:"center",marginBottom:"20px"},children:[Object(O.jsx)("span",{style:{display:"inline-block",marginRight:"10px",cursor:"pointer"},className:"flag-icon flag-icon-gb",onClick:function(){return t("en")}}),Object(O.jsx)("span",{style:{display:"inline-block",marginLeft:"10px",cursor:"pointer"},className:"flag-icon flag-icon-pl",onClick:function(){return t("pl")}})]})]})},ue=n(240),de=function(e){var t=e.t,n=e.changeLanguage,c=e.setLogged,r=e.setRole,s=Object(h.k)(),o=Object(a.useState)(void 0),l=Object(i.a)(o,2),u=l[0],d=l[1],j=N.b().shape({email:N.d().email(t("emailError")).required(t("required")),password:N.d().required(t("required")).min(6,t("passwordMinCharactersError")).max(50,t("passwordMaxCharactersError"))});return Object(O.jsxs)("div",{className:"loginForm",style:{marginTop:"17%",marginBottom:"27%"},children:[Object(O.jsx)(le,{changeLanguage:n,t:t}),Object(O.jsx)(C.a,{validationSchema:j,onSubmit:function(e){fetch("".concat(D,"/login"),{method:"POST",headers:{"Access-Control-Allow-Origin":"".concat(D),"Content-Type":"application/x-www-form-urlencoded;charset=UTF-8"},body:new URLSearchParams({userEmail:e.email,password:e.password})}).then((function(e){if(403===e.status)throw d(t("userDontExists")),new Error(t("userDontExists"));return e})).then((function(e){return e.json()})).then((function(e){sessionStorage.setItem("logged","true"),sessionStorage.setItem("token",JSON.stringify(e.access_token)),sessionStorage.setItem("id",JSON.stringify(e.user_id)),sessionStorage.setItem("logged","true"),c(!0);var t=Object(ue.a)(e.access_token);sessionStorage.setItem("exp",JSON.stringify(t.exp)),r(t.role),sessionStorage.setItem("role",JSON.stringify(t.role)),"PATIENT"===t.role?s.push({pathname:"/appointments"}):"DOCTOR"===t.role&&s.push({pathname:"/today-visits"})})).catch((function(e){return console.log(e)}))},initialErrors:{},validateOnChange:!0,validateOnMount:!1,initialValues:{email:"",password:""},children:function(e){var n=e.handleSubmit,a=e.handleChange,c=e.values,r=e.touched,i=e.isValid,o=e.errors;return Object(O.jsxs)(k.a,{onSubmit:n,children:[Object(O.jsxs)(S.a,{className:"mb-3",children:[Object(O.jsxs)(k.a.Group,{as:y.a,xs:12,md:6,controlId:"email",children:[Object(O.jsx)(k.a.Label,{children:"E-mail:"}),Object(O.jsx)(k.a.Control,{type:"email",name:"email",placeholder:t("enterEmail"),defaultValue:c.email,isInvalid:!!o.email,isValid:r.email&&!o.email,onChange:a}),Object(O.jsx)(k.a.Control.Feedback,{type:"invalid",children:o.email})]}),Object(O.jsxs)(k.a.Group,{as:y.a,xs:12,md:6,controlId:"password",children:[Object(O.jsxs)(k.a.Label,{children:[t("password"),":"]}),Object(O.jsx)(k.a.Control,{type:"password",name:"password",placeholder:t("enterPassword"),defaultValue:c.password,isInvalid:!!o.password,isValid:r.password&&!o.password,onChange:a}),Object(O.jsx)(k.a.Control.Feedback,{type:"invalid",children:o.password})]})]}),Object(O.jsx)("div",{style:{color:"#dc3545",marginBottom:"20px"},children:u}),Object(O.jsxs)("div",{children:[t("newUser"),"?\xa0",Object(O.jsx)(w.a,{variant:"primary",size:"sm",onClick:function(){s.push({pathname:"/register"})},children:t("createAccount")})]}),Object(O.jsx)("hr",{}),Object(O.jsx)("div",{style:{display:"flex",justifyContent:"center"},children:Object(O.jsx)(w.a,{style:{fontSize:"20px"},variant:"primary",type:"submit",disabled:!i,children:t("login")})})]})}})]})},je=function(e){var t=e.changeLanguage,n=e.t,a=N.b().shape({email:N.d().email(n("emailError")).required(n("required")),pesel:N.d().min(11,n("peselCharacterError")).max(11,n("peselCharacterError")).test("validatePesel",n("invalidPeselError"),(function(e){if(!1===/^[0-9]{11}$/.test(e))return!1;var t=(""+e).split("");if(parseInt(e.substring(4,6))>31||parseInt(e.substring(2,4))>12)return!1;var n=(1*parseInt(t[0])+3*parseInt(t[1])+7*parseInt(t[2])+9*parseInt(t[3])+1*parseInt(t[4])+3*parseInt(t[5])+7*parseInt(t[6])+9*parseInt(t[7])+1*parseInt(t[8])+3*parseInt(t[9]))%10;return 0===n&&(n=10),n=10-n,parseInt(t[10])===n})).required(n("required")),password:N.d().min(6,n("passwordMinCharactersError")).max(50,n("passwordMaxCharactersError")).required(n("required")),confirmPassword:N.d().oneOf([N.c("password"),""],n("passwordMatch")).required(n("required"))}),c=Object(h.k)();return Object(O.jsxs)("div",{className:"loginForm",style:{marginTop:"15%",marginBottom:"27%"},children:[Object(O.jsx)(le,{changeLanguage:t,t:n}),Object(O.jsx)(C.a,{validationSchema:a,enableReinitialize:!0,onSubmit:function(e){var t={pesel:e.pesel,email:e.email,password:e.password};fetch("".concat(D,"/registration"),{method:"POST",headers:{"Access-Control-Allow-Origin":"".concat(D),"Content-Type":"application/json;charset=UTF-8"},body:JSON.stringify(t)}).then((function(e){if(404===e.status)throw window.alert(n("userWithPeselNotFound")),new Error(n("userWithPeselNotFound"));window.alert(n("registerSuccessful")),c.push({pathname:"/login"})})).catch((function(e){console.log(e.message)}))},initialErrors:{},validateOnMount:!1,initialValues:{email:"",pesel:"",password:"",confirmPassword:""},children:function(e){var t=e.handleChange,a=e.handleSubmit,r=e.values,s=e.touched,i=e.isValid,o=e.errors;return Object(O.jsxs)(k.a,{onSubmit:a,children:[Object(O.jsxs)(S.a,{className:"align-items-center mb-3",children:[Object(O.jsx)(y.a,{children:Object(O.jsxs)(k.a.Group,{children:[Object(O.jsx)(k.a.Label,{children:"Pesel:"}),Object(O.jsx)(k.a.Control,{type:"text",name:"pesel",placeholder:"Pesel",defaultValue:r.email,isInvalid:!!o.pesel,isValid:s.pesel&&!o.pesel,onChange:t}),Object(O.jsx)(k.a.Control.Feedback,{type:"invalid",children:o.pesel})]})}),Object(O.jsx)(y.a,{children:Object(O.jsxs)(k.a.Group,{children:[Object(O.jsx)(k.a.Label,{children:"Email:"}),Object(O.jsx)(k.a.Control,{type:"email",name:"email",placeholder:"Email",defaultValue:r.email,isInvalid:!!o.email,isValid:s.email&&!o.email,onChange:t}),Object(O.jsx)(k.a.Control.Feedback,{type:"invalid",children:o.email})]})})]}),Object(O.jsxs)(S.a,{className:"align-items-center mb-3",children:[Object(O.jsx)(y.a,{children:Object(O.jsxs)(k.a.Group,{children:[Object(O.jsxs)(k.a.Label,{children:[n("password"),":"]}),Object(O.jsx)(k.a.Control,{type:"password",name:"password",placeholder:n("password"),defaultValue:r.password,isInvalid:!!o.password,isValid:s.password&&!o.password,onChange:t}),Object(O.jsx)(k.a.Control.Feedback,{type:"invalid",children:o.password})]})}),Object(O.jsx)(y.a,{children:Object(O.jsxs)(k.a.Group,{children:[Object(O.jsxs)(k.a.Label,{children:[n("confirmPassword"),":"]}),Object(O.jsx)(k.a.Control,{type:"password",name:"confirmPassword",placeholder:n("confirmPassword"),defaultValue:r.confirmPassword,isInvalid:!!o.confirmPassword,isValid:s.confirmPassword&&!o.confirmPassword,onChange:t}),Object(O.jsx)(k.a.Control.Feedback,{type:"invalid",children:o.confirmPassword})]})})]}),Object(O.jsxs)("div",{children:[n("alreadyHaveAnAccount"),"?\xa0",Object(O.jsx)(w.a,{variant:"primary",size:"sm",onClick:function(){c.push({pathname:"/login"})},children:"Login"})]}),Object(O.jsx)("hr",{}),Object(O.jsx)("div",{style:{display:"flex",justifyContent:"center"},children:Object(O.jsx)(w.a,{variant:"primary",size:"lg",type:"submit",disabled:!i,children:n("register")})})]})}})]})},be=n.p+"static/media/404.84004034.png",pe=function(e){var t=e.t;return Object(O.jsxs)("div",{className:"loginForm",style:{marginTop:"10%",marginBottom:"27%"},children:[Object(O.jsx)("img",{style:{width:"100%"},src:be,alt:"404 not found"}),Object(O.jsx)("h1",{style:{display:"flex",justifyContent:"center"},children:t("notFound")})]})},he=n(13),Oe=n.n(he),me=function(e){var t=e.app,n=e.t,c=Object(h.k)(),r=Object(a.useState)(t),s=Object(i.a)(r,2),o=s[0],l=s[1],u="DONE",d=6e4*(new Date).getTimezoneOffset(),j=Oe()(Date.now()),b=Oe()(o.patient.birthDate);Object(a.useEffect)((function(){void 0!==t&&l(t)}),[t]);return Object(O.jsxs)("div",{className:o.state===u?"appointmentAndCheckup todayApp":"appointmentAndCheckup archivalApp",children:[Object(O.jsxs)("div",{className:"top",children:[Object(O.jsx)("p",{className:"appointmentAndCheckupHeader",children:n(o.medicalServiceName)}),Object(O.jsxs)("div",{className:"data",children:[o.state===u&&Object(O.jsx)("p",{children:Object(O.jsx)(P.a,{size:42,style:{color:"#18a74b"}})}),Object(O.jsxs)("p",{children:[n("hour"),"\xa0",o.date?new Date(new Date(o.date)-d).toISOString().slice(11,16):""]})]})]}),Object(O.jsxs)("div",{children:[Object(O.jsxs)("p",{children:[Object(O.jsx)(F.d,{size:42}),o.patient?o.patient.firstName+" "+o.patient.lastName:""]}),Object(O.jsxs)("p",{children:[n("age"),"\xa0",j.diff(b,"year")]}),"TELEPHONE"===o.type?n("phoneNumber")+" "+o.patient.phoneNumber:""]}),o.state!==u&&Object(O.jsxs)(O.Fragment,{children:[Object(O.jsx)("hr",{}),Object(O.jsx)("div",{style:{display:"flex",justifyContent:"flex-end"},children:Object(O.jsx)("button",{className:"actionButton",onClick:function(e){return function(e){e.preventDefault(),c.push({pathname:"/today-visits/".concat(o.id,"/details"),state:o})}(e)},children:n("startVisit")})})]})]})},fe=function(e){var t=e.t,n=e.logout,c=Object(h.k)(),r=Object(a.useState)(!1),s=Object(i.a)(r,2),o=s[0],l=s[1],u=Object(a.useState)((function(){return JSON.parse(sessionStorage.getItem("id"))||void 0})),d=Object(i.a)(u,2),j=d[0],b=(d[1],Object(a.useState)((function(){return JSON.parse(sessionStorage.getItem("token"))||void 0}))),p=Object(i.a)(b,2),m=p[0],f=(p[1],[3,5,10]),x=Object(a.useState)([]),S=Object(i.a)(x,2),y=S[0],k=S[1],w=Object(a.useState)(1),C=Object(i.a)(w,2),N=C[0],I=C[1],A=Object(a.useState)(0),z=Object(i.a)(A,2),L=z[0],E=z[1],T=Object(a.useState)(f[0]),B=Object(i.a)(T,2),F=B[0],P=B[1],R=function(e,t){var n={};return e&&(n.page=e-1),t&&(n.size=t),n};Object(a.useEffect)((function(){var e=new AbortController;return Object(g.a)(v.a.mark((function t(){var n;return v.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,J();case 3:n=t.sent,k(n.appointments),E(n.totalPages),e=null,t.next=13;break;case 9:t.prev=9,t.t0=t.catch(0),console.log(t.t0),l(!0);case 13:case"end":return t.stop()}}),t,null,[[0,9]])})))(),function(){var t;return null===(t=e)||void 0===t?void 0:t.abort()}}),[N,F]);var J=function(){var e=Object(g.a)(v.a.mark((function e(){var t,n,a;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null===(t=R(N,F)).page||null===t.size){e.next=8;break}return e.next=4,fetch("".concat(D,"/doctors/").concat(j,"/todaysVisits?page=").concat(t.page,"&size=").concat(t.size),{headers:{Authorization:"Bearer ".concat(m)}});case 4:403===(n=e.sent).status&&l(!0),e.next=26;break;case 8:if(null===t.page||null!==t.size){e.next=15;break}return e.next=11,fetch("".concat(D,"/doctors/").concat(j,"/todaysVisits?page=").concat(t.page),{headers:{Authorization:"Bearer ".concat(m)}});case 11:403===(n=e.sent).status&&l(!0),e.next=26;break;case 15:if(null!==t.page||null===t.size){e.next=22;break}return e.next=18,fetch("".concat(D,"/doctors/").concat(j,"/todaysVisits?size=").concat(t.size),{headers:{Authorization:"Bearer ".concat(m)}});case 18:403===(n=e.sent).status&&l(!0),e.next=26;break;case 22:return e.next=24,fetch("".concat(D,"/doctors/").concat(j,"/todaysVisits"),{headers:{Authorization:"Bearer ".concat(m)}});case 24:403===(n=e.sent).status&&l(!0);case 26:return e.next=28,n.json();case 28:return a=e.sent,e.abrupt("return",a);case 30:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return!0===o?(n(c),Object(O.jsx)(O.Fragment,{})):Object(O.jsxs)("div",{className:"itemsList",children:[Object(O.jsx)("div",{className:"listHeader",children:Object(O.jsx)("h2",{children:t("todayAppointments")})}),y.length>0?Object(O.jsxs)(O.Fragment,{children:[Object(O.jsxs)("div",{className:"itemsNumber",children:[Object(O.jsxs)("p",{children:[t("elementsNumber"),"\xa0"]}),Object(O.jsx)("select",{onChange:function(e){P(e.target.value),I(1)},value:F,children:f.map((function(e){return Object(O.jsx)("option",{value:e,children:e},e)}))})]}),Object(O.jsx)("div",{className:"appointmentList",children:y.map((function(e){return Object(O.jsx)(me,{app:e,t:t},e.id)}))}),Object(O.jsx)(U.a,{className:"my-3",count:L,page:N,siblingCount:1,boundaryCount:1,shape:"rounded",onChange:function(e,t){I(t)}})]}):t("noAppointmentsToShow")]})},xe=function(e){var t=e.changeLanguage,n=e.t,a=e.setLogged,c=Object(h.k)(),r=Object(O.jsx)(p.a,{size:42}),s=Object(h.l)().pathname;return Object(O.jsx)(l.a,{bg:"light",variant:"light",expand:"lg",collapseOnSelect:"true",sticky:"top",className:"navContainer",children:Object(O.jsxs)(u.a,{fluid:!0,children:[Object(O.jsx)(l.a.Brand,{className:"navbar-brand",children:Object(O.jsx)("img",{src:o,alt:"Logo"})}),Object(O.jsx)(l.a.Toggle,{"aria-controls":"basic-navbar-nav"}),Object(O.jsxs)(l.a.Collapse,{id:"navbarToggleExternalContent",className:"navCollapse",children:[Object(O.jsxs)(d.a,{className:"navNav",children:[Object(O.jsx)(b.LinkContainer,{to:"/today-visits",activeHref:"active",children:Object(O.jsx)(d.a.Link,{exact:!0,className:"navItemLink",children:n("todayAppointments")})}),Object(O.jsx)(b.LinkContainer,{to:"/check-ups",activeHref:"active",children:Object(O.jsx)(d.a.Link,{exact:!0,className:"navItemLink",children:n("checkups")})})]},s),Object(O.jsxs)(j.a,{className:"navItemLanguages",title:r,id:"basic-nav-dropdown",children:[Object(O.jsxs)(j.a,{title:n("language"),id:"basic-nav-dropdown",children:[Object(O.jsx)(j.a.Item,{onClick:function(){t("en")},children:"English"}),Object(O.jsx)(j.a.Item,{onClick:function(){t("pl")},children:"Polski"})]}),Object(O.jsx)(j.a.Divider,{}),Object(O.jsx)(j.a.Item,{onClick:function(){sessionStorage.clear(),sessionStorage.setItem("logged","false"),a(!1),c.push("/login")},children:n("logout")})]})]})]})})},ve=n(241),ge=n.n(ve),Se=function(e){var t=e.appointment,n=e.t,c=e.logout,r=Object(a.useState)(!1),s=Object(i.a)(r,2),o=(s[0],s[1]),l=Object(a.useState)((function(){return JSON.parse(sessionStorage.getItem("token"))||void 0})),u=Object(i.a)(l,2),d=u[0],j=(u[1],Object(h.k)()),b=Object(a.useRef)(),p=function(e){return e.toISOString().slice(0,10)},m=Object(a.useState)({}),f=Object(i.a)(m,2),x=f[0],C=f[1],N=Object(a.useState)([]),I=Object(i.a)(N,2),A=I[0],E=I[1],T=Object(a.useState)([]),B=Object(i.a)(T,2),F=B[0],P=B[1],R=Object(a.useState)([]),U=Object(i.a)(R,2),J=U[0],V=U[1],q=Object(a.useState)(t),G=Object(i.a)(q,2),H=G[0],M=(G[1],Object(a.useState)((function(){return sessionStorage.getItem("description")||void 0}))),W=Object(i.a)(M,2),Y=W[0],_=W[1],$=Object(a.useState)((function(){return sessionStorage.getItem("recommendations")||void 0})),X=Object(i.a)($,2),Z=X[0],K=X[1],Q=Object(a.useState)(void 0),ee=Object(i.a)(Q,2),te=ee[0],ne=ee[1],ae=Object(a.useState)(p(new Date((new Date).setDate((new Date).getDate()+31)))),ce=Object(i.a)(ae,2),re=ce[0],se=ce[1],ie=Object(a.useState)(void 0),oe=Object(i.a)(ie,2),le=oe[0],ue=oe[1],de=Object(a.useState)((function(){var e=sessionStorage.getItem("referrals");return JSON.parse(e)||[]})),je=Object(i.a)(de,2),be=je[0],pe=je[1],he=Object(a.useState)(void 0),Oe=Object(i.a)(he,2),me=Oe[0],fe=Oe[1],xe=Object(a.useState)(void 0),ve=Object(i.a)(xe,2),Se=ve[0],ye=ve[1],ke=Object(a.useState)(1),we=Object(i.a)(ke,2),Ce=we[0],Ne=we[1],De=Object(a.useState)(void 0),Ie=Object(i.a)(De,2),Ae=Ie[0],ze=Ie[1],Le=Object(a.useState)((function(){var e=sessionStorage.getItem("medications");return JSON.parse(e)||[]})),Ee=Object(i.a)(Le,2),Te=Ee[0],Be=Ee[1],Fe=Object(a.useState)(void 0),Pe=Object(i.a)(Fe,2),Re=Pe[0],Ue=Pe[1],Je=Object(a.useState)(void 0),Ve=Object(i.a)(Je,2),qe=Ve[0],Ge=Ve[1],He=Object(a.useState)(void 0),Me=Object(i.a)(He,2),We=Me[0],Ye=Me[1],_e=Object(a.useState)(void 0),$e=Object(i.a)(_e,2),Xe=$e[0],Ze=$e[1],Ke=Object(a.useState)(void 0),Qe=Object(i.a)(Ke,2),et=Qe[0],tt=Qe[1],nt=Object(a.useState)((function(){var e=sessionStorage.getItem("checkups");return JSON.parse(e)||[]})),at=Object(i.a)(nt,2),ct=at[0],rt=at[1];Object(a.useEffect)((function(){var e=new AbortController;return Object(g.a)(v.a.mark((function t(){var a;return v.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,st();case 3:(a=t.sent).forEach((function(e){e.name=n(e.name)})),E(a),e=null,t.next=13;break;case 9:t.prev=9,t.t0=t.catch(0),console.log(t.t0),o(!0);case 13:case"end":return t.stop()}}),t,null,[[0,9]])})))(),function(){var t;return null===(t=e)||void 0===t?void 0:t.abort()}}),[]);var st=function(){var e=Object(g.a)(v.a.mark((function e(){var t;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(D,"/medicalServices"),{headers:{Authorization:"Bearer ".concat(d)}});case 2:return 403===(t=e.sent).status&&o(!0),e.next=6,t.json();case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();Object(a.useEffect)((function(){var e=new AbortController;return Object(g.a)(v.a.mark((function t(){var a;return v.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,it();case 3:(a=t.sent).forEach((function(e){e.name=n(e.name)})),P(a),e=null,t.next=13;break;case 9:t.prev=9,t.t0=t.catch(0),console.log(t.t0),o(!0);case 13:case"end":return t.stop()}}),t,null,[[0,9]])})))(),function(){var t;return null===(t=e)||void 0===t?void 0:t.abort()}}),[]);var it=function(){var e=Object(g.a)(v.a.mark((function e(){var t;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(D,"/checkups"),{headers:{Authorization:"Bearer ".concat(d)}});case 2:return 403===(t=e.sent).status&&o(!0),e.next=6,t.json();case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();Object(a.useEffect)((function(){var e=new AbortController;return Object(g.a)(v.a.mark((function t(){var n;return v.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,ot();case 3:n=t.sent,V(n),e=null,t.next=12;break;case 8:t.prev=8,t.t0=t.catch(0),console.log(t.t0),o(!0);case 12:case"end":return t.stop()}}),t,null,[[0,8]])})))(),function(){var t;return null===(t=e)||void 0===t?void 0:t.abort()}}),[]);var ot=function(){var e=Object(g.a)(v.a.mark((function e(){var t;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(D,"/medications"),{headers:{Authorization:"Bearer ".concat(d)}});case 2:return 403===(t=e.sent).status&&o(!0),e.next=6,t.json();case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();var lt=function(e){e.preventDefault();var t={};void 0!==Re&&(t.checkUpId=Re.id,t.name=Re.name,void 0!==qe&&(t.description=qe),void 0!==We&&""!==We&&(t.result=We),void 0!==Xe&&(t.file=Xe),ct.push(t),sessionStorage.setItem("checkups",JSON.stringify(ct)),Ue(void 0),document.getElementById("checkupSelect").value=n("chooseCheckUp"),Ge(""),Ye(""),Ze(void 0),b.current.value="")},ut=function(e){return new Promise((function(t,n){var a=new FileReader;a.readAsDataURL(e),a.onload=function(){t(a.result)},a.onerror=function(e){n(e)}}))},dt=function(){var e=Object(g.a)(v.a.mark((function e(t){var n,a,c,r,s,i,o,l;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.target.files[0],e.next=3,ut(n);case 3:for(a=e.sent,c=a.split("base64,")[1],r=atob(c),s=new Array(r.length),i=0;i<r.length;i++)s[i]=r.charCodeAt(i);o=new Uint8Array(s),l=Array.from(o),Ze(l);case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),jt=function(){var e={};return void 0!==Y&&""!==Y||(e.description=n("appointmentDescriptionRequired")),e};return Object(O.jsxs)(k.a,{className:"newAppointmentForm",children:[Object(O.jsxs)(k.a.Group,{className:"mb-3",controlId:"detailsForm.ControlTextArea1",children:[Object(O.jsx)(k.a.Label,{children:n("appointmentDescription")}),Object(O.jsx)(k.a.Control,{as:"textarea",rows:3,value:Y,isInvalid:!!x.description,onChange:function(e){_(e.target.value),sessionStorage.setItem("description",e.target.value),x.description&&C(Object(L.a)(Object(L.a)({},x),{},Object(z.a)({},"description",null)))}}),Object(O.jsx)(k.a.Control.Feedback,{type:"invalid",children:x.description})]}),Object(O.jsxs)(k.a.Group,{className:"mb-3",controlId:"detailForm.ControlTextArea2",children:[Object(O.jsxs)(k.a.Label,{children:[n("recommendations"),":"]}),Object(O.jsx)(k.a.Control,{as:"textarea",rows:3,value:Z,onChange:function(e){K(e.target.value),sessionStorage.setItem("recommendations",e.target.value)}})]}),Object(O.jsxs)(S.a,{className:"mb-3",children:[Object(O.jsxs)(k.a.Label,{children:[n("referrals"),":"]}),Object(O.jsxs)(y.a,{md:!0,children:[Object(O.jsxs)(k.a.Group,{children:[Object(O.jsxs)(k.a.Label,{column:"sm",children:[n("chooseService"),":"]}),Object(O.jsxs)(k.a.Select,{id:"serviceSelect",onChange:function(e){var t=parseInt(e.target.value);ne(A.find((function(e){return e.id===t})))},children:[Object(O.jsx)("option",{onClick:function(){return ne(void 0)},children:n("chooseService")}),A.map((function(e){return Object(O.jsx)("option",{value:e.id,children:e.name})}))]})]}),Object(O.jsxs)(k.a.Group,{children:[Object(O.jsx)(k.a.Label,{column:"sm",children:n("chooseExpirationDate")}),Object(O.jsx)(k.a.Control,{type:"date",value:re,onChange:function(e){return se(e.target.value)}})]})]}),Object(O.jsxs)(y.a,{md:!0,children:[Object(O.jsx)(k.a.Label,{column:"sm",children:n("referralsList")}),Object(O.jsx)("div",{style:{overflow:"scroll",height:"100px"},children:be.map((function(e){return Object(O.jsx)("div",{className:"appointmentFormSubsectionItem",onClick:function(){ue(e)},children:e.medicalServiceName+" "+n("to")+": "+e.expiryDate},e.id)}))})]})]}),Object(O.jsxs)("div",{style:{display:"flex",justifyContent:"space-between"},children:[Object(O.jsx)("button",{className:"addButton",onClick:function(e){return function(e){e.preventDefault();var t={};void 0!==te&&(t.medicalServiceId=te.id,t.medicalServiceName=te.name,t.expiryDate=re,be.push(t),sessionStorage.setItem("referrals",JSON.stringify(be)),ne(void 0),document.getElementById("serviceSelect").value=n("chooseService"),se(p(new Date((new Date).setDate((new Date).getDate()+31)))))}(e)},children:n("addReferral")}),Object(O.jsx)("button",{className:"deleteButton",onClick:function(e){return function(e){if(e.preventDefault(),void 0!==le){var t=be.indexOf(le);t>-1&&(be.splice(t,1),pe(be),sessionStorage.setItem("referrals",JSON.stringify(be)),ue(void 0))}}(e)},children:n("deleteReferral")})]}),Object(O.jsx)("hr",{}),Object(O.jsxs)(S.a,{className:"mb-3 topBuffer",children:[Object(O.jsxs)(y.a,{md:!0,children:[Object(O.jsx)(k.a.Label,{children:n("medications")}),Object(O.jsxs)(k.a.Group,{children:[Object(O.jsxs)(k.a.Label,{column:"sm",children:[n("chooseMedication"),":"]}),Object(O.jsxs)(k.a.Select,{id:"medicationSelect",onChange:function(e){var t=parseInt(e.target.value);fe(J.find((function(e){return e.id===t})))},children:[Object(O.jsx)("option",{onClick:function(){return fe(void 0)},children:n("chooseMedication")}),J.map((function(e){return Object(O.jsx)("option",{value:e.id,children:e.name})}))]})]}),Object(O.jsxs)(k.a.Group,{className:"mb-3",children:[Object(O.jsxs)(k.a.Label,{column:"sm",children:[n("dosage"),":"]}),Object(O.jsx)(k.a.Control,{type:"text",placeholder:n("dosage"),value:Se,onChange:function(e){return ye(e.target.value)}})]}),Object(O.jsxs)(k.a.Group,{children:[Object(O.jsx)(k.a.Label,{column:"sm",children:n("choosePackagesNumber")}),Object(O.jsx)(ge.a,{value:Ce,onChange:function(e){return Ne(parseInt(e.target.value))}})]})]}),Object(O.jsxs)(y.a,{md:!0,children:[Object(O.jsx)(k.a.Label,{column:"sm",children:n("medicationsList")}),Object(O.jsx)("div",{style:{overflow:"scroll",height:"216px"},children:Te.map((function(e){return Object(O.jsx)("div",{className:"appointmentFormSubsectionItem",onClick:function(){ze(e)},children:e.name+", "+e.numberOfPackages+" "+n("package")+". "},e.id)}))})]})]}),Object(O.jsxs)("div",{style:{display:"flex",justifyContent:"space-between"},children:[Object(O.jsx)("button",{className:"addButton",onClick:function(e){return function(e){e.preventDefault();var t={};void 0!==me&&void 0!==Se&&(0===Te.filter((function(e){return e.medicationId===me.id})).length?(t.numberOfPackages=Ce,t.dosing=Se,t.medicationId=me.id,t.name=me.name,Te.push(t),sessionStorage.setItem("medications",JSON.stringify(Te)),fe(void 0),document.getElementById("medicationSelect").value=n("chooseMedication"),ye(""),Ne(1)):window.alert(n("referralAddMedicationError")))}(e)},children:n("addMedication")}),Object(O.jsx)("button",{className:"deleteButton",onClick:function(e){return function(e){if(e.preventDefault(),void 0!==Ae){var t=Te.indexOf(Ae);t>-1&&(Te.splice(t,1),Be(Te),sessionStorage.setItem("medications",JSON.stringify(Te)),ze(void 0))}}(e)},children:n("deleteMedication")})]}),Object(O.jsx)("hr",{}),Object(O.jsx)(S.a,{}),"FACILITY"===t.type&&Object(O.jsxs)("div",{className:"topBuffer",children:[Object(O.jsxs)(k.a.Label,{children:[n("checkups"),":"]}),Object(O.jsx)("h6",{style:{color:"#e60000"},children:n("checkUpsInfo")}),Object(O.jsxs)(S.a,{className:"mb-3",children:[Object(O.jsx)(y.a,{md:!0,children:Object(O.jsxs)(k.a.Group,{children:[Object(O.jsxs)(k.a.Label,{column:"sm",children:[n("chooseCheckUp"),":"]}),Object(O.jsxs)(k.a.Select,{id:"checkupSelect",onChange:function(e){var t=parseInt(e.target.value);Ue(F.find((function(e){return e.id===t})))},children:[Object(O.jsx)("option",{onClick:function(){return Ue(void 0)},children:n("chooseCheckUp")}),F.map((function(e){return Object(O.jsx)("option",{value:e.id,children:e.name})}))]})]})}),Object(O.jsx)(y.a,{md:!0})]}),Object(O.jsxs)(S.a,{className:"mb-3",children:[Object(O.jsx)(y.a,{md:!0,children:Object(O.jsxs)(k.a.Group,{className:"mb-3",children:[Object(O.jsxs)(k.a.Label,{column:"sm",children:[n("description"),":"]}),Object(O.jsx)(k.a.Control,{as:"textarea",rows:3,value:qe,onChange:function(e){return Ge(e.target.value)}})]})}),Object(O.jsx)(y.a,{md:!0,children:Object(O.jsxs)(k.a.Group,{className:"mb-3",children:[Object(O.jsxs)(k.a.Label,{column:"sm",children:[n("result"),":"]}),Object(O.jsx)(k.a.Control,{as:"textarea",rows:3,value:We,onChange:function(e){return Ye(e.target.value)}})]})})]}),Object(O.jsxs)(S.a,{className:"mb-3",children:[Object(O.jsx)(y.a,{md:!0,children:Object(O.jsxs)(k.a.Group,{controlId:"formFile",className:"mb-3",children:[Object(O.jsxs)(k.a.Label,{column:"sm",children:[n("addFile"),":"]}),Object(O.jsx)(k.a.Control,{as:"input",type:"file",ref:b,size:"sm",onChange:function(e){return dt(e)}})]})}),Object(O.jsxs)(y.a,{md:!0,children:[Object(O.jsxs)(k.a.Label,{column:"sm",children:[n("checkUpsList"),":"]}),Object(O.jsx)("div",{style:{overflow:"scroll",height:"150px"},children:ct.map((function(e){return Object(O.jsx)("div",{className:"appointmentFormSubsectionItem",onClick:function(){tt(e)},children:e.name},e.id)}))})]})]}),Object(O.jsxs)("div",{style:{display:"flex",justifyContent:"space-between"},children:[Object(O.jsx)("button",{className:"addButton",onClick:function(e){return lt(e)},children:n("addCheckUp")}),Object(O.jsx)("button",{className:"deleteButton",onClick:function(e){return function(e){if(e.preventDefault(),void 0!==et){var t=ct.indexOf(et);t>-1&&(ct.splice(t,1),rt(ct),sessionStorage.setItem("checkups",JSON.stringify(ct)),tt(void 0))}}(e)},children:n("deleteCheckUp")})]}),Object(O.jsx)("hr",{})]}),Object(O.jsxs)("div",{style:{display:"flex",justifyContent:"center"},children:[Object(O.jsx)(w.a,{style:{marginLeft:"1%",marginRight:"1%"},variant:"danger",onClick:function(e){return function(e){e.preventDefault(),sessionStorage.removeItem("description"),sessionStorage.removeItem("recommendations"),sessionStorage.removeItem("referrals"),sessionStorage.removeItem("medications"),sessionStorage.removeItem("checkups"),j.push({pathname:"/today-visits"})}(e)},children:n("cancel")}),Object(O.jsx)(w.a,{style:{marginLeft:"1%",marginRight:"1%"},variant:"primary",onClick:function(e){return function(e){e.preventDefault();var t=jt();if(Object.keys(t).length>0)C(t);else{var a=[];if(Te.length>0){var r={},s=p(new Date((new Date).setDate((new Date).getDate()+31))),i=(Math.floor(1e4*Math.random())+1e4).toString().substring(1),o=Te;r.expiryDate=s,r.accessCode=i,r.medications=o,a=[r]}var l={};l.description=Y,l.recommendations=Z,l.referrals=be,l.prescriptions=a,l.checkUps=ct,fetch("".concat(D,"/appointments/").concat(H.id,"/done"),{method:"PATCH",headers:{"Content-Type":"application/json","Access-Control-Allow-Origin":"".concat(D),Authorization:"Bearer ".concat(d)},body:JSON.stringify(l)}).then((function(e){403===e.status?c(j):(window.alert(n("appointmentDetailsMessage")),j.push({pathname:"/today-visits"}))})).catch((function(e){return console.log(e)})),sessionStorage.removeItem("description"),sessionStorage.removeItem("recommendations"),sessionStorage.removeItem("referrals"),sessionStorage.removeItem("medications"),sessionStorage.removeItem("checkups")}}(e)},children:n("saveChanges")})]})]})},ye=function(e){var t=e.t,n=e.logout,c=Object(h.k)().location.state,r=Object(a.useState)(c||void 0),s=Object(i.a)(r,2),o=s[0];s[1];return Object(O.jsxs)("div",{className:"itemsList",children:[Object(O.jsx)("div",{className:"listHeader",children:Object(O.jsx)("h2",{children:t("appointmentDetails")})}),Object(O.jsx)("br",{}),Object(O.jsx)(ce,{appointment:o,t:t}),Object(O.jsx)(Se,{appointment:o,t:t,logout:n})]})},ke=function(e){var t=e.appointment,n=e.t,c=Object(a.useState)(!1),r=Object(i.a)(c,2),s=r[0],o=r[1],l=6e4*(new Date).getTimezoneOffset();return Object(O.jsxs)("div",{className:"appointmentAndCheckup archivalApp",onClick:function(e){return function(e){e.preventDefault(),o(!s)}(e)},children:[Object(O.jsxs)("div",{className:"top",children:[Object(O.jsx)("p",{className:"appointmentAndCheckupHeader",children:n(t.serviceName)}),Object(O.jsxs)("div",{className:"data",children:[Object(O.jsx)("p",{children:n("date")}),Object(O.jsx)("p",{children:t.date?new Date(new Date(t.date)-l).toISOString().slice(0,10):""}),Object(O.jsx)("p",{children:t.date?new Date(new Date(t.date)-l).toISOString().slice(11,16):""})]})]}),Object(O.jsx)("div",{style:{display:"flex",justifyContent:"space-between"},children:Object(O.jsxs)("div",{children:[Object(O.jsx)(F.d,{size:42}),n("doctorTitle"),"\xa0",t.doctor?t.doctor.firstName+" "+t.doctor.lastName:""]})}),t.recommendations?Object(O.jsx)(O.Fragment,{children:s?Object(O.jsxs)("div",{children:[Object(O.jsx)("hr",{}),Object(O.jsxs)("div",{className:"subsections",children:[Object(O.jsx)(F.a,{size:42}),Object(O.jsx)("p",{className:"header",children:n("recommendations")})]}),Object(O.jsx)("ol",{children:Object(O.jsx)("li",{children:t.recommendations})}),Object(O.jsx)("hr",{}),Object(O.jsxs)("div",{className:"subsections",children:[Object(O.jsx)(F.b,{size:42}),Object(O.jsx)("p",{className:"header",children:n("realizedCheckUps")})]}),Object(O.jsx)("p",{children:t.serviceName}),Object(O.jsx)("hr",{}),Object(O.jsxs)("div",{className:"subsections",children:[Object(O.jsx)(P.b,{size:42}),Object(O.jsx)("p",{className:"header",children:n("ePrescriptions")})]}),Object(O.jsx)("p",{children:t.prescriptions?n("ePrescriptionsIssued"):n("noPrescriptions")})]}):null}):null]})},we=function(e){var t=e.t,n=e.logout,c=Object(a.useState)(!1),r=Object(i.a)(c,2),s=r[0],o=r[1],l=Object(a.useState)((function(){return JSON.parse(sessionStorage.getItem("token"))||void 0})),u=Object(i.a)(l,2),d=u[0],j=(u[1],Object(h.k)()),b=j.location.state,p=Object(a.useState)([]),m=Object(i.a)(p,2),f=m[0],x=m[1],S=[3,5,10],y=Object(a.useState)(1),k=Object(i.a)(y,2),w=k[0],C=k[1],N=Object(a.useState)(0),I=Object(i.a)(N,2),A=I[0],z=(I[1],Object(a.useState)(S[0])),L=Object(i.a)(z,2),E=L[0],T=L[1],B=function(e,t){var n={};return e&&(n.page=e-1),t&&(n.size=t),n};Object(a.useEffect)((function(){var e=new AbortController;return Object(g.a)(v.a.mark((function t(){var n;return v.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,F();case 3:n=t.sent,x(n.appointments),e=null,t.next=12;break;case 8:t.prev=8,t.t0=t.catch(0),console.log(t.t0),o(!0);case 12:case"end":return t.stop()}}),t,null,[[0,8]])})))(),function(){var t;return null===(t=e)||void 0===t?void 0:t.abort()}}),[w,E]);var F=function(){var e=Object(g.a)(v.a.mark((function e(){var t,n,a;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null===(t=B(w,E)).page||null===t.size){e.next=8;break}return e.next=4,fetch("".concat(D,"/patients/").concat(b.patient.id,"/doneAppointments?page=").concat(t.page,"&size=").concat(t.size),{headers:{Authorization:"Bearer ".concat(d)}});case 4:403===(n=e.sent).status&&o(!0),e.next=26;break;case 8:if(null===t.page||null!==t.size){e.next=15;break}return e.next=11,fetch("".concat(D,"/patients/").concat(b.patient.id,"/doneAppointments?page=").concat(t.page),{headers:{Authorization:"Bearer ".concat(d)}});case 11:403===(n=e.sent).status&&o(!0),e.next=26;break;case 15:if(null!==t.page||null===t.size){e.next=22;break}return e.next=18,fetch("".concat(D,"/patients/").concat(b.patient.id,"/doneAppointments?size=").concat(t.size),{headers:{Authorization:"Bearer ".concat(d)}});case 18:403===(n=e.sent).status&&o(!0),e.next=26;break;case 22:return e.next=24,fetch("".concat(D,"/patients/").concat(b.patient.id,"/doneAppointments"),{headers:{Authorization:"Bearer ".concat(d)}});case 24:403===(n=e.sent).status&&o(!0);case 26:return e.next=28,n.json();case 28:return a=e.sent,e.abrupt("return",a);case 30:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return!0===s?(n(j),Object(O.jsx)(O.Fragment,{})):Object(O.jsxs)("div",{className:"itemsList",children:[Object(O.jsx)("div",{className:"listHeader",children:Object(O.jsx)("h2",{children:t("appointmentsHistory")})}),Object(O.jsx)(ce,{appointment:b,t:t}),Object(O.jsxs)("div",{className:"itemsNumber",children:[Object(O.jsxs)("p",{children:[t("elementsNumber"),"\xa0"]}),Object(O.jsx)("select",{onChange:function(e){T(e.target.value),C(1)},value:E,children:S.map((function(e){return Object(O.jsx)("option",{value:e,children:e},e)}))})]}),f.length>0?Object(O.jsx)("div",{className:"appointmentList",children:f.map((function(e){return Object(O.jsx)(ke,{appointment:e,t:t},e.id)}))}):Object(O.jsx)("span",{style:{marginTop:"1%"},children:t("noAppointmentsToShow")}),f.length>0&&Object(O.jsx)(U.a,{className:"my-3",count:A,page:w,siblingCount:1,boundaryCount:1,shape:"rounded",onChange:function(e,t){C(t)}})]})},Ce=function(e){var t=e.t,n=e.logout,c=Object(a.useState)((function(){return JSON.parse(sessionStorage.getItem("token"))||void 0})),r=Object(i.a)(c,2),s=r[0],o=(r[1],Object(a.useState)([])),l=Object(i.a)(o,2),u=l[0],d=l[1],j=Object(h.k)(),b=j.location.state,p=Object(a.useState)(b||void 0),m=Object(i.a)(p,2),f=m[0],x=(m[1],Object(a.useState)(!1)),S=Object(i.a)(x,2),y=S[0],k=S[1];Object(a.useEffect)((function(){var e=new AbortController;return Object(g.a)(v.a.mark((function t(){var n;return v.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,C();case 3:n=t.sent,d(n),e=null,t.next=12;break;case 8:t.prev=8,t.t0=t.catch(0),console.log(t.t0),k(!0);case 12:case"end":return t.stop()}}),t,null,[[0,8]])})))(),function(){var t;return null===(t=e)||void 0===t?void 0:t.abort()}}),[]);var C=function(){var e=Object(g.a)(v.a.mark((function e(){var t,n;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(D,"/patients/").concat(f.patient.id,"/files"),{headers:{Authorization:"Bearer ".concat(s)}});case 2:return 403===(t=e.sent).status&&k(!0),e.next=6,t.json();case 6:return n=e.sent,e.abrupt("return",n);case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return!0===y?(n(j),Object(O.jsx)(O.Fragment,{})):Object(O.jsxs)("div",{className:"itemsList",children:[Object(O.jsx)("div",{className:"listHeader",children:Object(O.jsx)("h2",{children:t("patientFiles")})}),Object(O.jsx)(ce,{appointment:f,t:t}),u.length>0?Object(O.jsxs)(E.a,{className:"table table-hover table-bordered fileTable topBuffer",style:{width:"80%"},children:[Object(O.jsx)("thead",{style:{backgroundColor:"#e6eeff"},children:Object(O.jsxs)("tr",{children:[Object(O.jsxs)("th",{children:[t("name"),":"]}),Object(O.jsxs)("th",{children:[t("description"),":"]}),Object(O.jsx)("th",{children:t("createDate")}),Object(O.jsx)("th",{children:t("action")})]})}),Object(O.jsx)("tbody",{children:u.map((function(e){return Object(O.jsxs)("tr",{children:[Object(O.jsx)("td",{children:e.name}),Object(O.jsx)("td",{children:e.description}),Object(O.jsx)("td",{children:e.uploadDate}),Object(O.jsx)("td",{children:Object(O.jsx)(w.a,{variant:"primary",onClick:function(t){return function(e,t){e.preventDefault(),fetch("".concat(D,"/patients/").concat(f.patient.id,"/files/").concat(t.id),{headers:{Authorization:"Bearer ".concat(s)}}).then((function(e){return e.json()})).then((function(e){var n=window.document.createElement("a"),a=new Uint8Array(e.file);n.href=window.URL.createObjectURL(new Blob([a],{type:t.type})),n.download=e.name,document.body.appendChild(n),n.click(),document.body.removeChild(n)}))}(t,e)},children:t("Download")})})]},e.id)}))})]}):Object(O.jsx)("span",{className:"topBuffer",children:t("noFiles")})]})},Ne=function(e){var t=e.checkup,n=e.setSelectedCheckup,c=e.t,r=Object(a.useState)((function(){return JSON.parse(sessionStorage.getItem("token"))||void 0})),s=Object(i.a)(r,2),o=s[0],l=(s[1],Object(a.useState)(!1)),u=Object(i.a)(l,2),d=u[0],j=u[1],b=Object(a.useState)(!0),p=Object(i.a)(b,2),h=(p[0],p[1]),m=Object(a.useState)(t),f=Object(i.a)(m,2),x=f[0],S=f[1],y=Object(a.useState)(void 0),w=Object(i.a)(y,2),C=w[0],N=w[1],I=Object(a.useState)(void 0),A=Object(i.a)(I,2),E=A[0],T=A[1],B=Object(a.useState)(void 0),P=Object(i.a)(B,2),R=P[0],U=P[1],J=Object(a.useState)({}),V=Object(i.a)(J,2),q=V[0],G=V[1],H=Object(a.useRef)(),M=Oe()(Date.now()),W=Oe()(x.patient.birthDate);function Y(e){e.preventDefault(),j(!d)}Object(a.useEffect)((function(){void 0!==t&&S(t)}),[t]);var _=function(e){return new Promise((function(t,n){var a=new FileReader;a.readAsDataURL(e),a.onload=function(){t(a.result)},a.onerror=function(e){n(e)}}))},$=function(){var e=Object(g.a)(v.a.mark((function e(t){var n,a,c,r,s,i,o,l;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.target.files[0],e.next=3,_(n);case 3:for(a=e.sent,c=a.split("base64,")[1],r=atob(c),s=new Array(r.length),i=0;i<r.length;i++)s[i]=r.charCodeAt(i);o=new Uint8Array(s),l=Array.from(o),T(l);case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),X=function(e){e.preventDefault();var t=function(){var e={};return void 0!==C&&""!==C||(e.result=c("checkupResultRequired")),void 0===E&&(e.file=c("checkupResultFileRequired")),e}();if(Object.keys(t).length>0)G(t);else{var a={};a.result=C,a.doctorsDescription=R,a.file=E,fetch("".concat(D,"/appointments/").concat(x.appointmentId,"/testResult/").concat(x.checkUpId),{method:"PATCH",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(o)},body:JSON.stringify(a)}).then((function(e){403===e.status&&window.alert("bl\u0105d"),e.json()})).then((function(){return new Promise((function(e){return setTimeout(e,2e3)}))})).then(window.alert(c("checkUpRealized"))).catch((function(e){return console.log(e)})),n(x),h(!1)}};return Object(O.jsxs)("div",{className:"appointmentAndCheckup",children:[Object(O.jsxs)("div",{className:"top",children:[Object(O.jsx)("p",{className:"appointmentAndCheckupHeader",children:c(x.diagnosticTestName)}),Object(O.jsxs)("div",{className:"data",children:[Object(O.jsx)("p",{children:c("date")}),Object(O.jsx)("p",{children:new Date(x.appointmentDate).toISOString().slice(0,10)}),Object(O.jsx)("p",{children:new Date(x.appointmentDate).toISOString().slice(11,16)})]})]}),Object(O.jsxs)("div",{children:[Object(O.jsxs)("p",{children:[Object(O.jsx)(F.d,{size:42}),x.patient?x.patient.firstName+" "+x.patient.lastName:""]}),Object(O.jsxs)("p",{children:[c("age"),"\xa0",M.diff(W,"year")]})]}),!d&&Object(O.jsx)("div",{style:{display:"flex",justifyContent:"flex-end"},children:Object(O.jsx)("button",{className:"actionButton",onClick:Y,children:c("realizeCheckUp")})}),d?Object(O.jsxs)(k.a,{children:[Object(O.jsxs)(k.a.Group,{className:"mb-3",controlId:"doctorDescription",children:[Object(O.jsxs)(k.a.Label,{children:[c("description"),":"]}),Object(O.jsx)(k.a.Control,{as:"textarea",rows:3,value:R,onChange:function(e){U(e.target.value)}})]}),Object(O.jsxs)(k.a.Group,{className:"mb-3",controlId:"result",children:[Object(O.jsxs)(k.a.Label,{children:[c("result"),":"]}),Object(O.jsx)(k.a.Control,{as:"textarea",rows:3,isInvalid:!!q.result,value:C,onChange:function(e){N(e.target.value),q.result&&G(Object(L.a)(Object(L.a)({},q),{},Object(z.a)({},"result",null)))}}),Object(O.jsx)(k.a.Control.Feedback,{type:"invalid",children:q.result})]}),Object(O.jsxs)(k.a.Group,{controlId:"file",className:"mb-2",children:[Object(O.jsx)(k.a.Label,{children:c("file")}),Object(O.jsx)(k.a.Control,{as:"input",ref:H,type:"file",isInvalid:!!q.file,onChange:function(e){$(e),q.file&&G(Object(L.a)(Object(L.a)({},q),{},Object(z.a)({},"file",null)))}}),Object(O.jsx)(k.a.Control.Feedback,{type:"invalid",children:q.file})]}),d&&Object(O.jsxs)("div",{className:"topBuffer",style:{display:"flex",justifyContent:"space-between"},children:[Object(O.jsx)("button",{className:"deleteButton",onClick:function(e){return Y(e)},children:c("cancel").toUpperCase()}),Object(O.jsx)("button",{className:"addButton",onClick:function(e){return X(e)},children:c("accept").toUpperCase()})]})]}):null]})},De=function(e){var t=e.t,n=e.logout,c=Object(h.k)(),r=Object(a.useState)(!1),s=Object(i.a)(r,2),o=s[0],l=s[1],u=Object(a.useState)((function(){return JSON.parse(sessionStorage.getItem("id"))||void 0})),d=Object(i.a)(u,2),j=d[0],b=(d[1],Object(a.useState)((function(){return JSON.parse(sessionStorage.getItem("token"))||void 0}))),p=Object(i.a)(b,2),m=p[0],f=(p[1],[3,5,10]),x=Object(a.useState)([]),S=Object(i.a)(x,2),y=S[0],k=S[1],w=Object(a.useState)(void 0),C=Object(i.a)(w,2),N=C[0],I=C[1],A=Object(a.useState)(1),z=Object(i.a)(A,2),L=z[0],E=z[1],T=Object(a.useState)(0),B=Object(i.a)(T,2),F=B[0],P=B[1],R=Object(a.useState)(f[0]),J=Object(i.a)(R,2),V=J[0],q=J[1],G=function(e,t){var n={};return e&&(n.page=e-1),t&&(n.size=t),n};Object(a.useEffect)((function(){var e=new AbortController;return Object(g.a)(v.a.mark((function t(){var n;return v.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,H();case 3:n=t.sent,k(n.checkUps),P(n.totalPages),e=null,t.next=13;break;case 9:t.prev=9,t.t0=t.catch(0),console.log(t.t0),l(!0);case 13:case"end":return t.stop()}}),t,null,[[0,9]])})))(),function(){var t;return null===(t=e)||void 0===t?void 0:t.abort()}}),[L,V,N]),Object(a.useEffect)((function(){void 0!==N&&k(y.filter(M))}),[N]);var H=function(){var e=Object(g.a)(v.a.mark((function e(){var t,n,a;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null===(t=G(L,V)).page||null===t.size){e.next=8;break}return e.next=4,fetch("".concat(D,"/doctors/").concat(j,"/testsWithoutResults?page=").concat(t.page,"&size=").concat(t.size),{headers:{Authorization:"Bearer ".concat(m)}});case 4:403===(n=e.sent).status&&l(!0),e.next=26;break;case 8:if(null===t.page||null!==t.size){e.next=15;break}return e.next=11,fetch("".concat(D,"/doctors/").concat(j,"/testsWithoutResults?page=").concat(t.page),{headers:{Authorization:"Bearer ".concat(m)}});case 11:403===(n=e.sent).status&&l(!0),e.next=26;break;case 15:if(null!==t.page||null===t.size){e.next=22;break}return e.next=18,fetch("".concat(D,"/doctors/").concat(j,"/testsWithoutResults?size=").concat(t.size),{headers:{Authorization:"Bearer ".concat(m)}});case 18:403===(n=e.sent).status&&l(!0),e.next=26;break;case 22:return e.next=24,fetch("".concat(D,"/doctors/").concat(j,"/testsWithoutResults"),{headers:{Authorization:"Bearer ".concat(m)}});case 24:403===(n=e.sent).status&&l(!0);case 26:return e.next=28,n.json();case 28:return a=e.sent,e.abrupt("return",a);case 30:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),M=function(e){if(e.appointmentId!==N.appointmentId&&e.checkUpId!==N.checkUpId)return e};return!0===o?(n(c),Object(O.jsx)(O.Fragment,{})):Object(O.jsxs)("div",{className:"itemsList",children:[Object(O.jsx)("div",{className:"listHeader",children:Object(O.jsx)("h2",{children:t("checkUpsToRealize")})}),y.length>0?Object(O.jsxs)(O.Fragment,{children:[Object(O.jsxs)("div",{className:"itemsNumber",children:[Object(O.jsxs)("p",{children:[t("elementsNumber"),"\xa0"]}),Object(O.jsx)("select",{onChange:function(e){q(e.target.value),E(1)},value:V,children:f.map((function(e){return Object(O.jsx)("option",{value:e,children:e},e)}))})]}),y.map((function(e){return Object(O.jsx)(Ne,{checkup:e,setSelectedCheckup:I,t:t})})),Object(O.jsx)(U.a,{className:"my-3",count:F,page:L,siblingCount:1,boundaryCount:1,shape:"rounded",onChange:function(e,t){E(t)}})]}):t("noCheckUps")]})},Ie=n.p+"static/media/stetoscope.a15ede8e.jpg",Ae=n(440),ze=n(60),Le=function(){var e="PATIENT",t="DOCTOR",n=Object(a.useState)((function(){return JSON.parse(sessionStorage.getItem("logged"))||!1})),c=Object(i.a)(n,2),r=c[0],s=c[1],o=Object(a.useState)((function(){return JSON.parse(sessionStorage.getItem("role"))||void 0})),l=Object(i.a)(o,2),u=l[0],d=l[1],j=Object(Ae.a)(),b=j.t,p=j.i18n,x=function(e){p.changeLanguage(e)},v=function(e){1e3*JSON.parse(sessionStorage.getItem("exp"))<Date.now()&&(e.push({pathname:"/login"}),window.alert(b("tokenExpiredLogout")),sessionStorage.clear(),sessionStorage.setItem("logged","false"),s(!1),d(void 0))};return Object(O.jsx)(ze.HashRouter,{children:Object(O.jsxs)("div",{children:[!0===r&&u===e&&Object(O.jsx)(m,{changeLanguage:x,t:b,setLogged:s}),!0===r&&u===t&&Object(O.jsx)(xe,{changeLanguage:x,t:b,setLogged:s}),Object(O.jsx)("div",{className:"wholePage",children:Object(O.jsxs)("div",{className:"content",style:!0!==r?{width:"100%",backgroundImage:"url(".concat(Ie,")")}:{width:"80%",backgroundImage:null},children:[!1===r&&Object(O.jsxs)(h.g,{children:[Object(O.jsx)(h.d,{exact:!0,path:"/login",component:function(){return Object(O.jsx)(de,{t:b,changeLanguage:x,setLogged:s,setRole:d})}}),Object(O.jsx)(h.d,{exact:!0,path:"/register",component:function(){return Object(O.jsx)(je,{t:b,changeLanguage:x})}}),Object(O.jsx)(h.d,{exact:!0,path:"/",children:Object(O.jsx)(h.c,{to:"/login"})})]}),u===e&&!0===r&&Object(O.jsxs)(h.g,{children:[Object(O.jsx)(h.d,{exact:!0,path:"/my-account",component:function(){return Object(O.jsx)(A,{t:b,logout:v,setLogged:s})}}),Object(O.jsx)(h.d,{exact:!0,path:"/my-files",component:function(){return Object(O.jsx)(T,{t:b,logout:v})}}),Object(O.jsx)(h.d,{exact:!0,path:"/appointments",component:function(){return Object(O.jsx)(J,{t:b,logout:v})}}),Object(O.jsx)(h.d,{exact:!0,path:"/new-appointment",component:function(){return Object(O.jsx)(H,{t:b,logout:v})}}),Object(O.jsx)(h.d,{exact:!0,path:"/referrals",component:function(){return Object(O.jsx)(W,{t:b,logout:v})}}),Object(O.jsx)(h.d,{exact:!0,path:"/schedule",component:function(){return Object(O.jsx)(ne,{t:b,logout:v})}}),Object(O.jsx)(h.d,{exact:!0,path:"/check-ups",component:function(){return Object(O.jsx)(re,{t:b,logout:v})}}),Object(O.jsx)(h.d,{exact:!0,path:"/prescriptions",component:function(){return Object(O.jsx)(oe,{t:b,logout:v})}}),Object(O.jsx)(h.d,{path:"*",component:function(){return Object(O.jsx)(pe,{t:b})}})]}),u===t&&!0===r&&Object(O.jsxs)(h.g,{children:[Object(O.jsx)(h.d,{exact:!0,path:"/today-visits",component:function(){return Object(O.jsx)(fe,{t:b,logout:v})}}),Object(O.jsx)(h.d,{exact:!0,path:"/today-visits/:id/details",component:function(){return Object(O.jsx)(ye,{t:b,logout:v})}}),Object(O.jsx)(h.d,{exact:!0,path:"/today-visits/:id/details/visits-history",component:function(){return Object(O.jsx)(we,{t:b,logout:v})}}),Object(O.jsx)(h.d,{exact:!0,path:"/today-visits/:id/details/check-ups",component:function(){return Object(O.jsx)(re,{t:b,logout:v})}}),Object(O.jsx)(h.d,{exact:!0,path:"/today-visits/:id/details/files",component:function(){return Object(O.jsx)(Ce,{t:b,logout:v})}}),Object(O.jsx)(h.d,{exact:!0,path:"/check-ups",component:function(){return Object(O.jsx)(De,{t:b,logout:v})}}),Object(O.jsx)(h.d,{path:"*",component:function(){return Object(O.jsx)(pe,{t:b})}})]})]})}),Object(O.jsx)(f,{t:b})]})})},Ee=(n(377),n(378),n(379),n(190)),Te=n(245),Be=n(247),Fe=n(127);Ee.a.use(Te.a).use(Be.a).use(Fe.e).init({fallbackLng:"pl",debug:!0,detection:{order:["queryString","cookie"],cache:["cookie"]},interpolation:{escapeValue:!1}});Ee.a;s.a.render(Object(O.jsx)(c.a.StrictMode,{children:Object(O.jsx)(a.Suspense,{fallback:Object(O.jsx)("div",{children:"Loading..."}),children:Object(O.jsx)(Le,{})})}),document.getElementById("root"))}},[[380,1,2]]]);
//# sourceMappingURL=main.a804aefb.chunk.js.map